{"remainingRequest":"/Library/WebServer/Documents/Projects/vite/m-driver-dashboard/node_modules/babel-loader/lib/index.js!/Library/WebServer/Documents/Projects/vite/m-driver-dashboard/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Library/WebServer/Documents/Projects/vite/m-driver-dashboard/node_modules/vue-loader/lib/index.js??vue-loader-options!/Library/WebServer/Documents/Projects/vite/m-driver-dashboard/src/components/DashboardComponents/TripHistory.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Library/WebServer/Documents/Projects/vite/m-driver-dashboard/src/components/DashboardComponents/TripHistory.vue","mtime":1621550045894},{"path":"/Library/WebServer/Documents/Projects/vite/m-driver-dashboard/package.json","mtime":1618948430363},{"path":"/Library/WebServer/Documents/Projects/vite/m-driver-dashboard/node_modules/cache-loader/dist/cjs.js","mtime":1618923176918},{"path":"/Library/WebServer/Documents/Projects/vite/m-driver-dashboard/node_modules/babel-loader/lib/index.js","mtime":1618923163808},{"path":"/Library/WebServer/Documents/Projects/vite/m-driver-dashboard/node_modules/cache-loader/dist/cjs.js","mtime":1618923176918},{"path":"/Library/WebServer/Documents/Projects/vite/m-driver-dashboard/node_modules/vue-loader/lib/index.js","mtime":1618923178100}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM3Lm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICIvTGlicmFyeS9XZWJTZXJ2ZXIvRG9jdW1lbnRzL1Byb2plY3RzL3ZpdGUvbS1kcml2ZXItZGFzaGJvYXJkL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS1jb3JlanMyL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2LnJlZ2V4cC5zZWFyY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczcuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczYuc3RyaW5nLmluY2x1ZGVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNy5vYmplY3QudmFsdWVzIjsKCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBmaXJlYmFzZSBmcm9tICIuLi8uLi9wbHVnaW5zL2ZpcmViYXNlIjsKdmFyIGRiID0gZmlyZWJhc2UuZmlyZXN0b3JlKCk7CnZhciByZWYgPSBkYi5jb2xsZWN0aW9uKCJkcml2ZXJIaXN0b3JpZXMiKTsKdmFyIG15RWFybmluZ1JlZiA9IGRiLmNvbGxlY3Rpb24oImRhaWx5RWFybmluZ3MiKTsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0cmlwc0RldGFpbDoge30sCiAgICAgIHRyaXBzSW5mbzogW10sCiAgICAgIGRhaWx5RWFybmluZ0RldGFpbDoge30sCiAgICAgIGF1dGhVc2VyOiB7fSwKICAgICAgc2VhcmNoOiAiIgogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICB0cmlwSGlzdG9yeTogZnVuY3Rpb24gdHJpcEhpc3RvcnkoKSB7CiAgICAgIHJldHVybiBPYmplY3QudmFsdWVzKHRoaXMudHJpcHNEZXRhaWwpLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICByZXR1cm4gZWwucGFyZW50RGF0ZTsKICAgICAgfSk7CiAgICB9LAogICAgdHJpcEZpbHRlckRhdGE6IGZ1bmN0aW9uIHRyaXBGaWx0ZXJEYXRhKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIHRoaXMudHJpcHNJbmZvLmZpbHRlcihmdW5jdGlvbiAoZWxlKSB7CiAgICAgICAgcmV0dXJuIGVsZS5wYXJlbnREYXRlLmluY2x1ZGVzKF90aGlzLnNlYXJjaCkgJiYgZWxlLnVzZXIgJiYgZWxlLnVzZXIudXNlckZ1bGxOYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoX3RoaXMuc2VhcmNoLnRvTG93ZXJDYXNlKCkpICYmIGVsZS5waWNrVXBMb2NhdGlvbi5pdGVtVGl0bGUuaW5jbHVkZXMoX3RoaXMuc2VhcmNoKSAmJiBlbGUuZHJvcE9mZkxvY2F0aW9uLml0ZW1UaXRsZS5pbmNsdWRlcyhfdGhpcy5zZWFyY2gpICYmIGVsZS5maW5hbFByaWNlICYmIGVsZS5maW5hbFByaWNlLmluY2x1ZGVzKF90aGlzLnNlYXJjaCkgJiYgZWxlLm15X2Vhcm5pbmdzICYmIGVsZS5teV9lYXJuaW5ncy5pbmNsdWRlcyhfdGhpcy5zZWFyY2gpICYmIGVsZS52aXRlX2ZlZXMgJiYgZWxlLnZpdGVfZmVlcy5pbmNsdWRlcyhfdGhpcy5mc2VhcmNoKTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5hdXRoVXNlciA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImF1dGhVc2VyIikpOwogICAgdGhpcy5nZXRUcmlwSGlzdG9yeSgpOwogICAgdGhpcy5nZXREYWlseUVhcm5pbmdzKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRUcmlwSGlzdG9yeTogZnVuY3Rpb24gZ2V0VHJpcEhpc3RvcnkoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmVmLmRvYyh0aGlzLmF1dGhVc2VyLmRyaXZlcklkKS5nZXQoKS50aGVuKGZ1bmN0aW9uIChzbmFwc2hvdCkgewogICAgICAgIF90aGlzMi50cmlwc0RldGFpbCA9IF9vYmplY3RTcHJlYWQoe30sIHNuYXBzaG90LmRhdGEoKSk7CiAgICAgICAgdmFyIGRldGFpbHMgPSBPYmplY3QudmFsdWVzKF90aGlzMi50cmlwc0RldGFpbCk7CiAgICAgICAgZGV0YWlscy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICAgICAgaWYgKGl0ZW0uZmluYWxQcmljZSkgewogICAgICAgICAgICBfdGhpczIudHJpcHNJbmZvLnB1c2goX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBpdGVtKSwge30sIHsKICAgICAgICAgICAgICBteV9lYXJuaW5nczogIiIuY29uY2F0KE1hdGguY2VpbChpdGVtLmZpbmFsUHJpY2UgLSBpdGVtLmZpbmFsUHJpY2UgKiAwLjEpKSwKICAgICAgICAgICAgICB2aXRlX2ZlZXM6ICIiLmNvbmNhdChNYXRoLmNlaWwoaXRlbS5maW5hbFByaWNlICogMC4xKSkKICAgICAgICAgICAgfSkpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgZXJyb3JDb2RlOiBlcnJvci5jb2RlLAogICAgICAgICAgZXJyb3JNZXNzYWdlOiBlcnJvci5tZXNzYWdlCiAgICAgICAgfTsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0RGFpbHlFYXJuaW5nczogZnVuY3Rpb24gZ2V0RGFpbHlFYXJuaW5ncygpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBteUVhcm5pbmdSZWYuZG9jKHRoaXMuYXV0aFVzZXIuZHJpdmVySWQpLmdldCgpLnRoZW4oZnVuY3Rpb24gKHNuYXBzaG90KSB7CiAgICAgICAgX3RoaXMzLmRhaWx5RWFybmluZ0RldGFpbCA9IF9vYmplY3RTcHJlYWQoe30sIHNuYXBzaG90LmRhdGEoKSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBlcnJvckNvZGU6IGVycm9yLmNvZGUsCiAgICAgICAgICBlcnJvck1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UKICAgICAgICB9OwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["TripHistory.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <el-card class=\"box-card\" shadow=\"always\">\n      <el-row :gutter=\"20\">\n        <el-col :span=\"18\">\n          <div class=\"o-card-title-3\">\n            Trip History\n          </div>\n        </el-col>\n        <el-col :span=\"6\">\n          <el-input\n            placeholder=\"Search Trips...\"\n            v-model=\"search\"\n            clearable=\"\"\n          ></el-input>\n        </el-col>\n      </el-row>\n      <el-row :gutter=\"20\">\n        <el-col :span=\"24\">\n          <el-table :data=\"tripFilterData\" stripe style=\"width: 100%\">\n            <el-table-column label=\"Date\">\n              <template slot-scope=\"props\">\n                {{ props.row.parentDate }}\n              </template>\n            </el-table-column>\n            <el-table-column label=\"Rider\">\n              <template slot-scope=\"props\">\n                {{ props.row.user ? props.row.user.userFullName : \"--\" }}\n              </template>\n            </el-table-column>\n            <el-table-column label=\"Ride Status\">\n              <template slot-scope=\"props\">\n                {{ props.row.rideStatus }}\n              </template>\n            </el-table-column>\n            <el-table-column label=\"Pickup\">\n              <template slot-scope=\"props\">\n                {{\n                  props.row.pickUpLocation\n                    ? props.row.pickUpLocation.itemTitle\n                    : \"\"\n                }}\n              </template>\n            </el-table-column>\n\n            <el-table-column label=\"Dropoff\">\n              <template slot-scope=\"props\">\n                {{\n                  props.row.pickUpLocation\n                    ? props.row.pickUpLocation.itemTitle\n                    : \"\"\n                }}\n              </template>\n            </el-table-column>\n            <el-table-column label=\"Total Price\">\n              <template slot-scope=\"props\">\n                {{ props.row.finalPrice }}\n              </template>\n            </el-table-column>\n            <el-table-column label=\"Earning\">\n              <template slot-scope=\"props\">\n                {{ props.row.my_earnings }}\n              </template>\n            </el-table-column>\n            <el-table-column label=\"Vite Fee\">\n              <template slot-scope=\"props\">\n                {{ props.row.vite_fees }}\n              </template>\n            </el-table-column>\n          </el-table>\n        </el-col>\n      </el-row>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport firebase from \"../../plugins/firebase\";\nconst db = firebase.firestore();\nconst ref = db.collection(\"driverHistories\");\nconst myEarningRef = db.collection(\"dailyEarnings\");\nexport default {\n  data() {\n    return {\n      tripsDetail: {},\n      tripsInfo: [],\n      dailyEarningDetail: {},\n      authUser: {},\n      search: \"\",\n    };\n  },\n  computed: {\n    tripHistory() {\n      return Object.values(this.tripsDetail).filter((el) => el.parentDate);\n    },\n    tripFilterData() {\n      return this.tripsInfo.filter((ele) => {\n        return (\n          ele.parentDate.includes(this.search) &&\n          ele.user &&\n          ele.user.userFullName\n            .toLowerCase()\n            .includes(this.search.toLowerCase()) &&\n          ele.pickUpLocation.itemTitle.includes(this.search) &&\n          ele.dropOffLocation.itemTitle.includes(this.search) &&\n          ele.finalPrice &&\n          ele.finalPrice.includes(this.search) &&\n          ele.my_earnings &&\n          ele.my_earnings.includes(this.search) &&\n          ele.vite_fees &&\n          ele.vite_fees.includes(this.fsearch)\n        );\n      });\n    },\n  },\n  created() {\n    this.authUser = JSON.parse(localStorage.getItem(\"authUser\"));\n    this.getTripHistory();\n    this.getDailyEarnings();\n  },\n  methods: {\n    getTripHistory() {\n      ref\n        .doc(this.authUser.driverId)\n        .get()\n        .then((snapshot) => {\n          this.tripsDetail = { ...snapshot.data() };\n          const details = Object.values(this.tripsDetail);\n          details.forEach((item, index) => {\n            if (item.finalPrice) {\n              this.tripsInfo.push({\n                ...item,\n                my_earnings: `${Math.ceil(\n                  item.finalPrice - item.finalPrice * 0.1\n                )}`,\n                vite_fees: `${Math.ceil(item.finalPrice * 0.1)}`,\n              });\n            }\n          });\n        })\n        .catch((error) => ({\n          errorCode: error.code,\n          errorMessage: error.message,\n        }));\n    },\n    getDailyEarnings() {\n      myEarningRef\n        .doc(this.authUser.driverId)\n        .get()\n        .then((snapshot) => {\n          this.dailyEarningDetail = { ...snapshot.data() };\n        })\n        .catch((error) => ({\n          errorCode: error.code,\n          errorMessage: error.message,\n        }));\n    },\n  },\n};\n</script>\n"],"sourceRoot":"src/components/DashboardComponents"}]}