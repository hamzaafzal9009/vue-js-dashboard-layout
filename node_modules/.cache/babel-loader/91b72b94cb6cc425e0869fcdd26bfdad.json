{"remainingRequest":"/Library/WebServer/Documents/Projects/vue/m-driver-dashboard/node_modules/babel-loader/lib/index.js!/Library/WebServer/Documents/Projects/vue/m-driver-dashboard/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Library/WebServer/Documents/Projects/vue/m-driver-dashboard/node_modules/vue-loader/lib/index.js??vue-loader-options!/Library/WebServer/Documents/Projects/vue/m-driver-dashboard/src/components/DashboardComponents/TripHistory.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Library/WebServer/Documents/Projects/vue/m-driver-dashboard/src/components/DashboardComponents/TripHistory.vue","mtime":1618925633072},{"path":"/Library/WebServer/Documents/Projects/vue/m-driver-dashboard/package.json","mtime":1618948430363},{"path":"/Library/WebServer/Documents/Projects/vue/m-driver-dashboard/node_modules/cache-loader/dist/cjs.js","mtime":1618923176918},{"path":"/Library/WebServer/Documents/Projects/vue/m-driver-dashboard/node_modules/babel-loader/lib/index.js","mtime":1618923163808},{"path":"/Library/WebServer/Documents/Projects/vue/m-driver-dashboard/node_modules/cache-loader/dist/cjs.js","mtime":1618923176918},{"path":"/Library/WebServer/Documents/Projects/vue/m-driver-dashboard/node_modules/vue-loader/lib/index.js","mtime":1618923178100}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM3Lm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICIvTGlicmFyeS9XZWJTZXJ2ZXIvRG9jdW1lbnRzL1Byb2plY3RzL3Z1ZS9tLWRyaXZlci1kYXNoYm9hcmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lLWNvcmVqczIvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczYucmVnZXhwLnNlYXJjaCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNy5hcnJheS5pbmNsdWRlcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNi5zdHJpbmcuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLml0ZXJhYmxlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM3Lm9iamVjdC52YWx1ZXMiOwoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGZpcmViYXNlIGZyb20gIi4uLy4uL3BsdWdpbnMvZmlyZWJhc2UiOwp2YXIgZGIgPSBmaXJlYmFzZS5maXJlc3RvcmUoKTsKdmFyIHJlZiA9IGRiLmNvbGxlY3Rpb24oImRyaXZlckhpc3RvcmllcyIpOwp2YXIgbXlFYXJuaW5nUmVmID0gZGIuY29sbGVjdGlvbigiZGFpbHlFYXJuaW5ncyIpOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRyaXBzRGV0YWlsOiB7fSwKICAgICAgdHJpcHNJbmZvOiBbXSwKICAgICAgZGFpbHlFYXJuaW5nRGV0YWlsOiB7fSwKICAgICAgYXV0aFVzZXI6IHt9LAogICAgICBzZWFyY2g6ICIiCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHRyaXBIaXN0b3J5OiBmdW5jdGlvbiB0cmlwSGlzdG9yeSgpIHsKICAgICAgcmV0dXJuIE9iamVjdC52YWx1ZXModGhpcy50cmlwc0RldGFpbCkuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgIHJldHVybiBlbC5wYXJlbnREYXRlOwogICAgICB9KTsKICAgIH0sCiAgICB0cmlwRmlsdGVyRGF0YTogZnVuY3Rpb24gdHJpcEZpbHRlckRhdGEoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gdGhpcy50cmlwc0luZm8uZmlsdGVyKGZ1bmN0aW9uIChlbGUpIHsKICAgICAgICByZXR1cm4gZWxlLnBhcmVudERhdGUuaW5jbHVkZXMoX3RoaXMuc2VhcmNoKSAmJiBlbGUudXNlciAmJiBlbGUudXNlci51c2VyRnVsbE5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhfdGhpcy5zZWFyY2gudG9Mb3dlckNhc2UoKSkgJiYgZWxlLnBpY2tVcExvY2F0aW9uLml0ZW1UaXRsZS5pbmNsdWRlcyhfdGhpcy5zZWFyY2gpICYmIGVsZS5kcm9wT2ZmTG9jYXRpb24uaXRlbVRpdGxlLmluY2x1ZGVzKF90aGlzLnNlYXJjaCkgJiYgZWxlLmZpbmFsUHJpY2UgJiYgZWxlLmZpbmFsUHJpY2UuaW5jbHVkZXMoX3RoaXMuc2VhcmNoKSAmJiBlbGUubXlfZWFybmluZ3MgJiYgZWxlLm15X2Vhcm5pbmdzLmluY2x1ZGVzKF90aGlzLnNlYXJjaCkgJiYgZWxlLnZpdGVfZmVlcyAmJiBlbGUudml0ZV9mZWVzLmluY2x1ZGVzKF90aGlzLmZzZWFyY2gpOwogICAgICB9KTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmF1dGhVc2VyID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiYXV0aFVzZXIiKSk7CiAgICB0aGlzLmdldFRyaXBIaXN0b3J5KCk7CiAgICB0aGlzLmdldERhaWx5RWFybmluZ3MoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldFRyaXBIaXN0b3J5OiBmdW5jdGlvbiBnZXRUcmlwSGlzdG9yeSgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZWYuZG9jKHRoaXMuYXV0aFVzZXIuZHJpdmVySWQpLmdldCgpLnRoZW4oZnVuY3Rpb24gKHNuYXBzaG90KSB7CiAgICAgICAgX3RoaXMyLnRyaXBzRGV0YWlsID0gX29iamVjdFNwcmVhZCh7fSwgc25hcHNob3QuZGF0YSgpKTsKICAgICAgICB2YXIgZGV0YWlscyA9IE9iamVjdC52YWx1ZXMoX3RoaXMyLnRyaXBzRGV0YWlsKTsKICAgICAgICBkZXRhaWxzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgICBpZiAoaXRlbS5maW5hbFByaWNlKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGl0ZW0uZmluYWxQcmljZSk7CgogICAgICAgICAgICBfdGhpczIudHJpcHNJbmZvLnB1c2goX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBpdGVtKSwge30sIHsKICAgICAgICAgICAgICBteV9lYXJuaW5nczogIiIuY29uY2F0KE1hdGguY2VpbChpdGVtLmZpbmFsUHJpY2UgLSBpdGVtLmZpbmFsUHJpY2UgKiAwLjEpKSwKICAgICAgICAgICAgICB2aXRlX2ZlZXM6ICIiLmNvbmNhdChNYXRoLmNlaWwoaXRlbS5maW5hbFByaWNlICogMC4xKSkKICAgICAgICAgICAgfSkpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgZXJyb3JDb2RlOiBlcnJvci5jb2RlLAogICAgICAgICAgZXJyb3JNZXNzYWdlOiBlcnJvci5tZXNzYWdlCiAgICAgICAgfTsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0RGFpbHlFYXJuaW5nczogZnVuY3Rpb24gZ2V0RGFpbHlFYXJuaW5ncygpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBteUVhcm5pbmdSZWYuZG9jKHRoaXMuYXV0aFVzZXIuZHJpdmVySWQpLmdldCgpLnRoZW4oZnVuY3Rpb24gKHNuYXBzaG90KSB7CiAgICAgICAgX3RoaXMzLmRhaWx5RWFybmluZ0RldGFpbCA9IF9vYmplY3RTcHJlYWQoe30sIHNuYXBzaG90LmRhdGEoKSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBlcnJvckNvZGU6IGVycm9yLmNvZGUsCiAgICAgICAgICBlcnJvck1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UKICAgICAgICB9OwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["TripHistory.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <el-card class=\"box-card\" shadow=\"always\">\n      <el-row :gutter=\"20\">\n        <el-col :span=\"18\">\n          <div class=\"o-card-title-3\">\n            Trip History\n          </div>\n        </el-col>\n        <el-col :span=\"6\">\n          <el-input\n            placeholder=\"Search Trips...\"\n            v-model=\"search\"\n            clearable=\"\"\n          ></el-input>\n        </el-col>\n      </el-row>\n      <el-row :gutter=\"20\">\n        <el-col :span=\"24\">\n          <el-table :data=\"tripFilterData\" stripe style=\"width: 100%\">\n            <el-table-column label=\"Date\">\n              <template slot-scope=\"props\">\n                {{ props.row.parentDate }}\n              </template>\n            </el-table-column>\n            <el-table-column label=\"Rider\">\n              <template slot-scope=\"props\">\n                {{ props.row.user ? props.row.user.userFullName : \"--\" }}\n              </template>\n            </el-table-column>\n            <el-table-column label=\"Ride Status\">\n              <template slot-scope=\"props\">\n                {{ props.row.rideStatus }}\n              </template>\n            </el-table-column>\n            <el-table-column label=\"Pickup\">\n              <template slot-scope=\"props\">\n                {{\n                  props.row.pickUpLocation\n                    ? props.row.pickUpLocation.itemTitle\n                    : \"\"\n                }}\n              </template>\n            </el-table-column>\n\n            <el-table-column label=\"Dropoff\">\n              <template slot-scope=\"props\">\n                {{\n                  props.row.pickUpLocation\n                    ? props.row.pickUpLocation.itemTitle\n                    : \"\"\n                }}\n              </template>\n            </el-table-column>\n            <el-table-column label=\"Total Price\">\n              <template slot-scope=\"props\">\n                {{ props.row.finalPrice }}\n              </template>\n            </el-table-column>\n            <el-table-column label=\"Earning\">\n              <template slot-scope=\"props\">\n                {{ props.row.my_earnings }}\n              </template>\n            </el-table-column>\n            <el-table-column label=\"Vite Fee\">\n              <template slot-scope=\"props\">\n                {{ props.row.vite_fees }}\n              </template>\n            </el-table-column>\n          </el-table>\n        </el-col>\n      </el-row>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport firebase from \"../../plugins/firebase\";\nconst db = firebase.firestore();\nconst ref = db.collection(\"driverHistories\");\nconst myEarningRef = db.collection(\"dailyEarnings\");\nexport default {\n  data() {\n    return {\n      tripsDetail: {},\n      tripsInfo: [],\n      dailyEarningDetail: {},\n      authUser: {},\n      search: \"\",\n    };\n  },\n  computed: {\n    tripHistory() {\n      return Object.values(this.tripsDetail).filter((el) => el.parentDate);\n    },\n    tripFilterData() {\n      return this.tripsInfo.filter((ele) => {\n        return (\n          ele.parentDate.includes(this.search) &&\n          ele.user &&\n          ele.user.userFullName\n            .toLowerCase()\n            .includes(this.search.toLowerCase()) &&\n          ele.pickUpLocation.itemTitle.includes(this.search) &&\n          ele.dropOffLocation.itemTitle.includes(this.search) &&\n          ele.finalPrice &&\n          ele.finalPrice.includes(this.search) &&\n          ele.my_earnings &&\n          ele.my_earnings.includes(this.search) &&\n          ele.vite_fees &&\n          ele.vite_fees.includes(this.fsearch)\n        );\n      });\n    },\n  },\n  created() {\n    this.authUser = JSON.parse(localStorage.getItem(\"authUser\"));\n    this.getTripHistory();\n    this.getDailyEarnings();\n  },\n  methods: {\n    getTripHistory() {\n      ref\n        .doc(this.authUser.driverId)\n        .get()\n        .then((snapshot) => {\n          this.tripsDetail = { ...snapshot.data() };\n          const details = Object.values(this.tripsDetail);\n          details.forEach((item, index) => {\n            if (item.finalPrice) {\n              console.log(item.finalPrice);\n              this.tripsInfo.push({\n                ...item,\n                my_earnings: `${Math.ceil(\n                  item.finalPrice - item.finalPrice * 0.1\n                )}`,\n                vite_fees: `${Math.ceil(item.finalPrice * 0.1)}`,\n              });\n            }\n          });\n        })\n        .catch((error) => ({\n          errorCode: error.code,\n          errorMessage: error.message,\n        }));\n    },\n    getDailyEarnings() {\n      myEarningRef\n        .doc(this.authUser.driverId)\n        .get()\n        .then((snapshot) => {\n          this.dailyEarningDetail = { ...snapshot.data() };\n        })\n        .catch((error) => ({\n          errorCode: error.code,\n          errorMessage: error.message,\n        }));\n    },\n  },\n};\n</script>\n"],"sourceRoot":"src/components/DashboardComponents"}]}