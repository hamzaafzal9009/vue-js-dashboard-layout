{"remainingRequest":"/Library/WebServer/Documents/Projects/vue/Vite Dashboard/node_modules/vue-loader/lib/index.js??vue-loader-options!/Library/WebServer/Documents/Projects/vue/Vite Dashboard/src/components/RidersComponents/ImageUpload.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Library/WebServer/Documents/Projects/vue/Vite Dashboard/src/components/RidersComponents/ImageUpload.vue","mtime":1615416246180},{"path":"/Library/WebServer/Documents/Projects/vue/Vite Dashboard/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/vue/Vite Dashboard/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Library/WebServer/Documents/Projects/vue/Vite Dashboard/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/vue/Vite Dashboard/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBWdWUgZnJvbSAidnVlIjsKaW1wb3J0IFZ1ZUNyb3BwaWUgZnJvbSAidnVlLWNyb3BwaWUiOwppbXBvcnQgeyBtYXBNdXRhdGlvbnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0ICJjcm9wcGllL2Nyb3BwaWUuY3NzIjsKVnVlLnVzZShWdWVDcm9wcGllKTsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICBjb3ZlcjogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZSwKICAgIH0sCiAgICBwcm9maWxlOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlLAogICAgfSwKICAgIC8vIFRlbXBvcmFyeSBmaXggY2FycmllZCBvdXQgZm9yIG92ZXJsYXkgaXNzdWUgd2hlbiB2LWRpYWxvZyBpcyBwcmVzZW50IGluc2lkZSBhbm90aGVyIHYtZGlhbG9nCiAgICBoaWRlT3ZlcmxheTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZSwKICAgIH0sCiAgICB0aXRsZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IG51bGwsCiAgICB9LAogICAgdmlld1BvcnQ6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0KCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICB3aWR0aDogIjEwMCUiLAogICAgICAgICAgaGVpZ2h0OiAzNTAsCiAgICAgICAgfTsKICAgICAgfSwKICAgIH0sCiAgICBvcHRpb25zU2l6ZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICJvcmlnaW5hbCIsCiAgICB9LAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRpYWxvZzogdHJ1ZSwKICAgICAgaW1hZ2U6ICIiLAogICAgICBzaG93Q3JvcHBpZTogZmFsc2UsCiAgICAgIGNyb3BwZWQ6ICIiLAogICAgICBjcm9wU3RhdHVzOiBmYWxzZSwKICAgICAgc2hvd0ltZzogZmFsc2UsCiAgICAgIGZpbGU6ICIiLAogICAgICBmaWxlTmFtZTogIiIsCiAgICAgIG9wdGlvbnM6IHsKICAgICAgICBmb3JtYXQ6ICJqcGVnIiwKICAgICAgICBjaXJjbGU6IGZhbHNlLAogICAgICAgIHNpemU6IHRoaXMub3B0aW9uc1NpemUsCiAgICAgIH0sCiAgICAgIGNoZWNrYm94OiB0cnVlLAogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBnZXRWaWV3UG9ydCgpIHsKICAgICAgaWYgKHRoaXMuY292ZXIpIHsKICAgICAgICByZXR1cm4geyB3aWR0aDogIjEwMCUiLCBoZWlnaHQ6IDMwMCwgdHlwZTogInNxdWFyZSIgfTsKICAgICAgfSBlbHNlIGlmICh0aGlzLnByb2ZpbGUpIHsKICAgICAgICByZXR1cm4geyB3aWR0aDogMjAwLCBoZWlnaHQ6IDIwMCwgdHlwZTogImNpcmNsZSIgfTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgd2lkdGg6IHRoaXMudmlld1BvcnQud2lkdGgsCiAgICAgICAgICBoZWlnaHQ6IHRoaXMudmlld1BvcnQuaGVpZ2h0LAogICAgICAgICAgdHlwZTogInNxdWFyZSIsCiAgICAgICAgfTsKICAgICAgfQogICAgfSwKICB9LAogIG1ldGhvZHM6IHsKICAgIC4uLm1hcE11dGF0aW9ucyh7CiAgICAgIHNldFNuYWNrQmFyOiAiY29tbW9uL3NldFNuYWNrQmFyIiwKICAgIH0pLAoKICAgIHBpY2tGaWxlKCkgewogICAgICB0aGlzLiRyZWZzLmltYWdlLmNsaWNrKCk7CiAgICB9LAogICAgdXBsb2FkKGZpbGUpIHsKICAgICAgaWYgKGZpbGUudGFyZ2V0LmZpbGVzWzBdLm5hbWUuc3BsaXQoIi4iKS5wb3AoKSAhPT0gInN2ZyIpIHsKICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgIHRoaXMuZmlsZU5hbWUgPSBmaWxlLnRhcmdldC5maWxlc1swXS5uYW1lOwogICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUudGFyZ2V0LmZpbGVzWzBdKTsKICAgICAgICB0aGlzLnNob3dDcm9wcGllID0gdHJ1ZTsKICAgICAgICByZWFkZXIub25sb2FkID0gKCkgPT4gewogICAgICAgICAgdGhpcy4kcmVmcy5jcm9wcGllUmVmLmJpbmQoewogICAgICAgICAgICB1cmw6IHJlYWRlci5yZXN1bHQsCiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuaW1hZ2UgPSByZWFkZXIucmVzdWx0OwogICAgICAgICAgdGhpcy5maWxlID0gZmlsZS50YXJnZXQuZmlsZXM7CiAgICAgICAgICBmaWxlLnRhcmdldC52YWx1ZSA9IG51bGw7CiAgICAgICAgfTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnNldFNuYWNrQmFyKHsKICAgICAgICAgIHRleHQ6ICJTVkcgaW1hZ2Ugbm90IGFsbG93ZWQgaGVyZS4iLAogICAgICAgICAgY29sb3I6ICJyZWQiLAogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgY3JvcCgpIHsKICAgICAgdGhpcy4kcmVmcy5jcm9wcGllUmVmLnJlc3VsdCh0aGlzLm9wdGlvbnMsIChvdXRwdXQpID0+IHsKICAgICAgICB0aGlzLmNyb3BwZWQgPSBvdXRwdXQ7CiAgICAgIH0pOwogICAgICB0aGlzLnNob3dDcm9wcGllID0gZmFsc2U7CiAgICAgIHRoaXMuY3JvcFN0YXR1cyA9IGZhbHNlOwogICAgICB0aGlzLnNob3dJbWcgPSB0cnVlOwogICAgfSwKICAgIGNsb3NlKCkgewogICAgICB0aGlzLiRjb25maXJtKCJBcmUgeW91IHN1cmUgdG8gY2xvc2UgdGhpcyBkaWFsb2c/IikKICAgICAgICAudGhlbigoXykgPT4gewogICAgICAgICAgdGhpcy5kaWFsb2cgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuJGVtaXQoImNsb3NlIik7CiAgICAgICAgICB0aGlzLnJlc2V0KCk7CiAgICAgICAgICBkb25lKCk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKF8pID0+IHt9KTsKICAgIH0sCiAgICB1cGRhdGUoKSB7CiAgICAgIHRoaXMuJGVtaXQoImNyb3BwZWRJbWFnZSIsIHRoaXMuZGF0YVVSTHRvQmxvYih0aGlzLmNyb3BwZWQpKTsKICAgICAgdGhpcy4kZW1pdCgiaW1hZ2VOYW1lIiwgdGhpcy5maWxlTmFtZSk7CiAgICAgIHRoaXMuJGVtaXQoImlucHV0IiwgdGhpcy5kYXRhVVJMdG9CbG9iKHRoaXMuY3JvcHBlZCkpOwogICAgICB0aGlzLiRlbWl0KCJiYXNlNjREYXRhIiwgdGhpcy5jcm9wcGVkKTsKICAgICAgdGhpcy4kZW1pdCgiYWN0dWFsRmlsZSIsIHRoaXMuZmlsZSk7CiAgICAgIHRoaXMuZGlhbG9nID0gZmFsc2U7CiAgICAgIHRoaXMucmVzZXQoKTsKICAgIH0sCiAgICBkYXRhVVJMdG9CbG9iKGRhdGF1cmwpIHsKICAgICAgY29uc3QgYXJyID0gZGF0YXVybC5zcGxpdCgiLCIpOwogICAgICBjb25zdCBtaW1lID0gYXJyWzBdLm1hdGNoKC86KC4qPyk7LylbMV07CiAgICAgIGNvbnN0IGJzdHIgPSBhdG9iKGFyclsxXSk7CiAgICAgIGxldCBuID0gYnN0ci5sZW5ndGg7CiAgICAgIGNvbnN0IHU4YXJyID0gbmV3IFVpbnQ4QXJyYXkobik7CiAgICAgIHdoaWxlIChuLS0pIHsKICAgICAgICB1OGFycltuXSA9IGJzdHIuY2hhckNvZGVBdChuKTsKICAgICAgfQogICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW3U4YXJyXSwgeyB0eXBlOiBtaW1lIH0pOwogICAgICBibG9iLm5hbWUgPSB0aGlzLmZpbGVOYW1lOwogICAgICByZXR1cm4gYmxvYjsKICAgIH0sCiAgICByZXN1bHQob3V0cHV0KSB7CiAgICAgIHRoaXMuY3JvcHBlZCA9IG91dHB1dDsKICAgIH0sCiAgICByZXNldCgpIHsKICAgICAgdGhpcy5jcm9wcGVkID0gbnVsbDsKICAgICAgdGhpcy5jcm9wU3RhdHVzID0gZmFsc2U7CiAgICAgIHRoaXMuc2hvd0ltZyA9IGZhbHNlOwogICAgICB0aGlzLnNob3dDcm9wcGllID0gZmFsc2U7CiAgICAgIHRoaXMuaW1hZ2UgPSAiIjsKICAgICAgdGhpcy5maWxlID0gIiI7CiAgICAgIHRoaXMuZmlsZU5hbWUgPSAiIjsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["ImageUpload.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ImageUpload.vue","sourceRoot":"src/components/RidersComponents","sourcesContent":["<template>\n  <el-dialog\n    :title=\"title || 'Upload Image'\"\n    :visible.sync=\"dialog\"\n    width=\"50%\"\n    :before-close=\"close\"\n  >\n    <el-row :gutter=\"20\">\n      <el-col :span=\"24\" v-if=\"showImg && !showCroppie\">\n        <el-image\n          style=\"width: 100%; height: 250\"\n          :src=\"cropped\"\n          fit=\"contain\"\n        ></el-image>\n      </el-col>\n      <el-col :span=\"24\" v-if=\"showCroppie\">\n        <vue-croppie\n          ref=\"croppieRef\"\n          :enable-resize=\"true\"\n          :viewport=\"getViewPort\"\n          :boundary=\"{ height: 500, width: '100%' }\"\n          @result=\"result\"\n        ></vue-croppie>\n      </el-col>\n      <el-col :span=\"24\" v-if=\"!image && !showCroppie\" class=\"text-center\">\n        <i class=\"fal fa-upload\"></i>\n        <div class=\"grey--text\">\n          Browse Image from here\n        </div>\n      </el-col>\n    </el-row>\n    <span slot=\"footer\" class=\"dialog-footer\">\n      <input\n        ref=\"image\"\n        type=\"file\"\n        class=\"d-none\"\n        accept=\"image/*\"\n        @change=\"upload\"\n      />\n      <el-button @click=\"close\">Cancel</el-button>\n      <el-button type=\"success\" v-if=\"!cropStatus && showCroppie\" @click=\"crop\"\n        >Crop</el-button\n      >\n\n      <el-button type=\"success\" v-if=\"cropped\" @click=\"update\"\n        >Update</el-button\n      >\n\n      <el-button type=\"success\" v-if=\"cropped\" @click=\"update\"\n        >Upload</el-button\n      >\n\n      <el-button type=\"warning\" v-if=\"!image\" @click=\"pickFile\"\n        >Browse</el-button\n      >\n\n      <el-button type=\"primary\" v-else text @click=\"reset\">Reset</el-button>\n    </span>\n  </el-dialog>\n</template>\n\n<script>\nimport Vue from \"vue\";\nimport VueCroppie from \"vue-croppie\";\nimport { mapMutations } from \"vuex\";\nimport \"croppie/croppie.css\";\nVue.use(VueCroppie);\nexport default {\n  props: {\n    cover: {\n      type: Boolean,\n      default: false,\n    },\n    profile: {\n      type: Boolean,\n      default: false,\n    },\n    // Temporary fix carried out for overlay issue when v-dialog is present inside another v-dialog\n    hideOverlay: {\n      type: Boolean,\n      default: false,\n    },\n    title: {\n      type: String,\n      default: null,\n    },\n    viewPort: {\n      type: Object,\n      default() {\n        return {\n          width: \"100%\",\n          height: 350,\n        };\n      },\n    },\n    optionsSize: {\n      type: String,\n      default: \"original\",\n    },\n  },\n  data() {\n    return {\n      dialog: true,\n      image: \"\",\n      showCroppie: false,\n      cropped: \"\",\n      cropStatus: false,\n      showImg: false,\n      file: \"\",\n      fileName: \"\",\n      options: {\n        format: \"jpeg\",\n        circle: false,\n        size: this.optionsSize,\n      },\n      checkbox: true,\n    };\n  },\n  computed: {\n    getViewPort() {\n      if (this.cover) {\n        return { width: \"100%\", height: 300, type: \"square\" };\n      } else if (this.profile) {\n        return { width: 200, height: 200, type: \"circle\" };\n      } else {\n        return {\n          width: this.viewPort.width,\n          height: this.viewPort.height,\n          type: \"square\",\n        };\n      }\n    },\n  },\n  methods: {\n    ...mapMutations({\n      setSnackBar: \"common/setSnackBar\",\n    }),\n\n    pickFile() {\n      this.$refs.image.click();\n    },\n    upload(file) {\n      if (file.target.files[0].name.split(\".\").pop() !== \"svg\") {\n        const reader = new FileReader();\n        this.fileName = file.target.files[0].name;\n        reader.readAsDataURL(file.target.files[0]);\n        this.showCroppie = true;\n        reader.onload = () => {\n          this.$refs.croppieRef.bind({\n            url: reader.result,\n          });\n          this.image = reader.result;\n          this.file = file.target.files;\n          file.target.value = null;\n        };\n      } else {\n        this.setSnackBar({\n          text: \"SVG image not allowed here.\",\n          color: \"red\",\n        });\n      }\n    },\n    crop() {\n      this.$refs.croppieRef.result(this.options, (output) => {\n        this.cropped = output;\n      });\n      this.showCroppie = false;\n      this.cropStatus = false;\n      this.showImg = true;\n    },\n    close() {\n      this.$confirm(\"Are you sure to close this dialog?\")\n        .then((_) => {\n          this.dialog = false;\n          this.$emit(\"close\");\n          this.reset();\n          done();\n        })\n        .catch((_) => {});\n    },\n    update() {\n      this.$emit(\"croppedImage\", this.dataURLtoBlob(this.cropped));\n      this.$emit(\"imageName\", this.fileName);\n      this.$emit(\"input\", this.dataURLtoBlob(this.cropped));\n      this.$emit(\"base64Data\", this.cropped);\n      this.$emit(\"actualFile\", this.file);\n      this.dialog = false;\n      this.reset();\n    },\n    dataURLtoBlob(dataurl) {\n      const arr = dataurl.split(\",\");\n      const mime = arr[0].match(/:(.*?);/)[1];\n      const bstr = atob(arr[1]);\n      let n = bstr.length;\n      const u8arr = new Uint8Array(n);\n      while (n--) {\n        u8arr[n] = bstr.charCodeAt(n);\n      }\n      const blob = new Blob([u8arr], { type: mime });\n      blob.name = this.fileName;\n      return blob;\n    },\n    result(output) {\n      this.cropped = output;\n    },\n    reset() {\n      this.cropped = null;\n      this.cropStatus = false;\n      this.showImg = false;\n      this.showCroppie = false;\n      this.image = \"\";\n      this.file = \"\";\n      this.fileName = \"\";\n    },\n  },\n};\n</script>\n\n<style>\n.fal.fa-upload {\n  font-size: 72px;\n  margin-bottom: 20px;\n}\n.d-none {\n  display: none;\n}\n</style>\n"]}]}