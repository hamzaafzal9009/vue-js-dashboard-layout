{"remainingRequest":"/Library/WebServer/Documents/Projects/vue/Vite Dashboard/node_modules/vue-loader/lib/index.js??vue-loader-options!/Library/WebServer/Documents/Projects/vue/Vite Dashboard/src/components/DashboardComponents/NumberCard.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Library/WebServer/Documents/Projects/vue/Vite Dashboard/src/components/DashboardComponents/NumberCard.vue","mtime":1614454604456},{"path":"/Library/WebServer/Documents/Projects/vue/Vite Dashboard/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/vue/Vite Dashboard/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/vue/Vite Dashboard/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/vue/Vite Dashboard/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBmaXJlYmFzZSBmcm9tICJmaXJlYmFzZS9hcHAiOwppbXBvcnQgImZpcmViYXNlL2ZpcmVzdG9yZSI7CmNvbnN0IGRiID0gZmlyZWJhc2UuZmlyZXN0b3JlKCk7CmNvbnN0IGRyaXZlclJlZiA9IGRiLmNvbGxlY3Rpb24oImRyaXZlcnMiKTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJudW1iZXJzQ2FyZCIsCiAgZGF0YTogKCkgPT4gKHsKICAgIGRyaXZlcnNEYXRhOiBbCiAgICAgIHsKICAgICAgICB0aXRsZTogIlRvdGFsIERyaXZlcnMiLAogICAgICAgIGljb25jb2xvcjogImNvbG9yLXByaW1hcnkiLAogICAgICAgIGljb246ICJmYXMgZmEtdXNlci10aWUiLAogICAgICAgIHZhbHVlOiAidG90YWwiLAogICAgICAgIHRvdGFsOiAwLAogICAgICAgIG51bWJlcjogMCwKICAgICAgfSwKICAgICAgewogICAgICAgIHRpdGxlOiAiQXBwcm92ZWQgRHJpdmVycyIsCiAgICAgICAgaWNvbmNvbG9yOiAiY29sb3Itc3VjY2VzcyIsCiAgICAgICAgaWNvbjogImZhcyBmYS11c2VyLWNoZWNrIiwKICAgICAgICB2YWx1ZTogImFwcHJvdmUiLAogICAgICAgIHRvdGFsOiAwLAogICAgICAgIG51bWJlcjogMCwKICAgICAgfSwKICAgICAgewogICAgICAgIHRpdGxlOiAiQmxvY2tlZCBEcml2ZXJzIiwKICAgICAgICBpY29uY29sb3I6ICJjb2xvci1kYW5nZXIiLAogICAgICAgIGljb246ICJmYXMgZmEtdXNlci1zbGFzaCIsCiAgICAgICAgdmFsdWU6ICJibG9ja2VkIiwKICAgICAgICB0b3RhbDogMCwKICAgICAgICBudW1iZXI6IDAsCiAgICAgIH0sCiAgICAgIHsKICAgICAgICB0aXRsZTogIk5ldyBEcml2ZXJzIiwKICAgICAgICBpY29uY29sb3I6ICJjb2xvci1pbmZvIiwKICAgICAgICBpY29uOiAiZmFzIGZhLXVzZXItcGx1cyIsCiAgICAgICAgdmFsdWU6ICJuZXciLAogICAgICAgIHRvdGFsOiAwLAogICAgICAgIG51bWJlcjogMCwKICAgICAgfSwKICAgICAgewogICAgICAgIHRpdGxlOiAiSW5jb21wbGV0ZSBEcml2ZXJzIiwKICAgICAgICBpY29uY29sb3I6ICJjb2xvci13YXJuaW5nIiwKICAgICAgICBpY29uOiAiZmFzIGZhLXVzZXItdGltZXMiLAogICAgICAgIHZhbHVlOiAiaW5jb21wbGV0ZSIsCiAgICAgICAgdG90YWw6IDAsCiAgICAgICAgbnVtYmVyOiAwLAogICAgICB9LAogICAgXSwKICAgIHNob3dMb2FkaW5nOiBmYWxzZSwKICB9KSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5nZXREcml2ZXJzKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXREcml2ZXJzKCkgewogICAgICB0aGlzLnNob3dMb2FkaW5nID0gdHJ1ZTsKICAgICAgZHJpdmVyUmVmLmdldCgpLnRoZW4oKGRhdGEpID0+IHsKICAgICAgICBjb25zdCBkcml2ZXJzID0gZGF0YS5kb2NzLmZpbHRlcigoeCkgPT4geC5kYXRhKCkuZHJpdmVySWQpOwogICAgICAgIGNvbnN0IHRvdGFsRHJpdmVycyA9IGRyaXZlcnMubGVuZ3RoOwogICAgICAgIGNvbnN0IGRyaXZlckNvdW50cyA9IHsKICAgICAgICAgIHRvdGFsOiB0b3RhbERyaXZlcnMsCiAgICAgICAgICBhcHByb3ZlOiAwLAogICAgICAgICAgYmxvY2tlZDogMCwKICAgICAgICAgIG5ldzogMCwKICAgICAgICAgIGluY29tcGxldGU6IDAsCiAgICAgICAgfTsKICAgICAgICBkcml2ZXJzLmZvckVhY2goKGRyaXZlcikgPT4gewogICAgICAgICAgY29uc3QgZHJpdmVyRGF0YSA9IGRyaXZlci5kYXRhKCk7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIGRyaXZlckRhdGEuaXNCbG9ja2VkID09PSAidHJ1ZSIgfHwKICAgICAgICAgICAgZHJpdmVyRGF0YS5pc0Jsb2NrZWQgPT09IHRydWUKICAgICAgICAgICkgewogICAgICAgICAgICBkcml2ZXJDb3VudHMuYmxvY2tlZCArPSAxOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaWYgKGRyaXZlckRhdGEuZHJpdmVyU3RhdHVzID09PSAiY29uZmlybWVkIikgewogICAgICAgICAgICAgIGRyaXZlckNvdW50cy5hcHByb3ZlICs9IDE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGRyaXZlckRhdGEuZHJpdmVyU3RhdHVzID09PSAicGVuZGluZyIpIHsKICAgICAgICAgICAgICBkcml2ZXJDb3VudHMubmV3ICs9IDE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgIGRyaXZlckRhdGEuZHJpdmVyU3RhdHVzID09PSAiaW5jb21wbGV0ZSIgfHwKICAgICAgICAgICAgICB0eXBlb2YgZHJpdmVyRGF0YS5kcml2ZXJTdGF0dXMgPT09ICJ1bmRlZmluZWQiCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIGRyaXZlckNvdW50cy5pbmNvbXBsZXRlICs9IDE7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB0aGlzLmRyaXZlcnNEYXRhLmZvckVhY2goKG9iaikgPT4gewogICAgICAgICAgKG9iai5udW1iZXIgPSBkcml2ZXJDb3VudHNbb2JqLnZhbHVlXSksCiAgICAgICAgICAgIChvYmoudG90YWwgPSBvYmoudmFsdWUgPT09ICJ0b3RhbCIgPyAwIDogdG90YWxEcml2ZXJzKTsKICAgICAgICB9KTsKCiAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["NumberCard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"NumberCard.vue","sourceRoot":"src/components/DashboardComponents","sourcesContent":["<template>\n  <div >\n    <el-col :sm=\"24\" :md=\"5\" v-for=\"card in driversData\" :key=\"card.title\">\n      <el-card class=\"box-card clickable\" shadow=\"hover\">\n        <el-row>\n          <el-col :span=\"18\">\n            <div class=\"o-card-title-3\">\n              {{ card.title }}\n            </div>\n            <div class=\"o-card-data\" v-show=\"!showLoading\">\n              {{ card.number }}\n            </div>\n            <div class=\"dashboard-row dashboard-loader\" v-show=\"showLoading\">\n              <i class=\"el-icon-loading\"></i>\n            </div>\n          </el-col>\n          <el-col :span=\"6\">\n            <div class=\"o-card-icon\" :class=\"[card.iconcolor]\">\n              <i :class=\"card.icon\"></i>\n            </div>\n          </el-col>\n        </el-row>\n      </el-card>\n    </el-col>\n  </div>\n</template>\n\n<script>\nimport firebase from \"firebase/app\";\nimport \"firebase/firestore\";\nconst db = firebase.firestore();\nconst driverRef = db.collection(\"drivers\");\nexport default {\n  name: \"numbersCard\",\n  data: () => ({\n    driversData: [\n      {\n        title: \"Total Drivers\",\n        iconcolor: \"color-primary\",\n        icon: \"fas fa-user-tie\",\n        value: \"total\",\n        total: 0,\n        number: 0,\n      },\n      {\n        title: \"Approved Drivers\",\n        iconcolor: \"color-success\",\n        icon: \"fas fa-user-check\",\n        value: \"approve\",\n        total: 0,\n        number: 0,\n      },\n      {\n        title: \"Blocked Drivers\",\n        iconcolor: \"color-danger\",\n        icon: \"fas fa-user-slash\",\n        value: \"blocked\",\n        total: 0,\n        number: 0,\n      },\n      {\n        title: \"New Drivers\",\n        iconcolor: \"color-info\",\n        icon: \"fas fa-user-plus\",\n        value: \"new\",\n        total: 0,\n        number: 0,\n      },\n      {\n        title: \"Incomplete Drivers\",\n        iconcolor: \"color-warning\",\n        icon: \"fas fa-user-times\",\n        value: \"incomplete\",\n        total: 0,\n        number: 0,\n      },\n    ],\n    showLoading: false,\n  }),\n  created() {\n    this.getDrivers();\n  },\n  methods: {\n    getDrivers() {\n      this.showLoading = true;\n      driverRef.get().then((data) => {\n        const drivers = data.docs.filter((x) => x.data().driverId);\n        const totalDrivers = drivers.length;\n        const driverCounts = {\n          total: totalDrivers,\n          approve: 0,\n          blocked: 0,\n          new: 0,\n          incomplete: 0,\n        };\n        drivers.forEach((driver) => {\n          const driverData = driver.data();\n          if (\n            driverData.isBlocked === \"true\" ||\n            driverData.isBlocked === true\n          ) {\n            driverCounts.blocked += 1;\n          } else {\n            if (driverData.driverStatus === \"confirmed\") {\n              driverCounts.approve += 1;\n            }\n            if (driverData.driverStatus === \"pending\") {\n              driverCounts.new += 1;\n            }\n            if (\n              driverData.driverStatus === \"incomplete\" ||\n              typeof driverData.driverStatus === \"undefined\"\n            ) {\n              driverCounts.incomplete += 1;\n            }\n          }\n        });\n        this.driversData.forEach((obj) => {\n          (obj.number = driverCounts[obj.value]),\n            (obj.total = obj.value === \"total\" ? 0 : totalDrivers);\n        });\n\n        this.showLoading = false;\n      });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.el-row--flex {\n  flex-direction: row;\n}\n.text-center {\n  text-align: center;\n}\n.el-card__body {\n  padding: 0 15px !important;\n}\n.color-primary{\n  color: #1976d2\n}\n.color-info{\n  color: #909399\n}\n.color-warning{\n  color: #E6A23C\n}\n.color-success{\n  color: #67C23A\n}\n.color-danger{\n  color: #F56C6C\n}\n\n@media only screen and (min-width: 992px) {\n  .el-col-md-5 {\n    width: 19.83333%;\n  }\n}\n</style>\n"]}]}