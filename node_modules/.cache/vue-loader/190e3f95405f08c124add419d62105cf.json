{"remainingRequest":"/Library/WebServer/Documents/Projects/vue/m-driver-dashboard/node_modules/vue-loader/lib/index.js??vue-loader-options!/Library/WebServer/Documents/Projects/vue/m-driver-dashboard/src/components/Dashboard.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Library/WebServer/Documents/Projects/vue/m-driver-dashboard/src/components/Dashboard.vue","mtime":1618924894166},{"path":"/Library/WebServer/Documents/Projects/vue/m-driver-dashboard/node_modules/babel-loader/lib/index.js","mtime":1618923163808},{"path":"/Library/WebServer/Documents/Projects/vue/m-driver-dashboard/node_modules/cache-loader/dist/cjs.js","mtime":1618923176918},{"path":"/Library/WebServer/Documents/Projects/vue/m-driver-dashboard/node_modules/vue-loader/lib/index.js","mtime":1618923178100}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBmaXJlYmFzZSBmcm9tICIuLi9wbHVnaW5zL2ZpcmViYXNlIjsKY29uc3QgZGIgPSBmaXJlYmFzZS5maXJlc3RvcmUoKTsKaW1wb3J0IEJhckNoYXJ0IGZyb20gIi4vQ2hhcnRzL0JhckNoYXJ0IjsKY29uc3QgbXlFYXJuaW5nUmVmID0gZGIuY29sbGVjdGlvbigiZGFpbHlFYXJuaW5ncyIpOwppbXBvcnQgVHJpcEhpc3RvcnkgZnJvbSAiLi9EYXNoYm9hcmRDb21wb25lbnRzL1RyaXBIaXN0b3J5IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJkYXNoYm9hcmQiLAogIGNvbXBvbmVudHM6IHsKICAgIEJhckNoYXJ0LAogICAgVHJpcEhpc3RvcnksCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hvd0xvYWRpbmc6IGZhbHNlLAoKICAgICAgZWFybmluZ3NJbmZvcm1hdGlvbjogWwogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAiVHJpcHMgVG90YWwiLAogICAgICAgICAgdmFsdWU6ICJ0b3RhbFRyaXBzIiwKICAgICAgICAgIGljb246ICJmYWwgZmEtc3VpdGNhc2Utcm9sbGluZyIsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogIk15IEVhcm5pbmdzIiwKICAgICAgICAgIHZhbHVlOiAidG90YWxFYXJuaW5ncyIsCiAgICAgICAgICBpY29uOiAiZmFsIGZhLXNhY2stZG9sbGFyIiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAiVml0ZSBGZWUiLAogICAgICAgICAgdmFsdWU6ICIiLAogICAgICAgICAgaWNvbjogImZhbCBmYS1jb21tZW50LWRvbGxhciIsCiAgICAgICAgfSwKICAgICAgXSwKICAgICAgcmF0aW5nSW5mb3JtYXRpb246IFsKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogIkZpdmUgU3RhciIsCiAgICAgICAgICB2YWx1ZTogImZpdmVTdGFyVHJpcHMiLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICJDdXJyZW50IiwKICAgICAgICAgIHZhbHVlOiAicmF0ZWRUcmlwcyIsCiAgICAgICAgfSwKICAgICAgXSwKICAgICAgdHJpcHNJbmZvcm1hdGlvbjogWwogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAiVG90YWwiLAogICAgICAgICAgdmFsdWU6ICJ0b3RhbFRyaXBzIiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAiQWNjZXB0ZWQiLAogICAgICAgICAgdmFsdWU6ICJhY2NlcHRlZFRyaXBzIiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAiTm8gU2hvdyIsCiAgICAgICAgICB2YWx1ZTogIm5vU2hvd1RyaXBzIiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAiTWlzc2VkIiwKICAgICAgICAgIHZhbHVlOiAibWlzc2VkVHJpcHMiLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICJDYW5jZWxsZWQiLAogICAgICAgICAgdmFsdWU6ICJjYW5jZWxlZFRyaXBzIiwKICAgICAgICB9LAogICAgICBdLAogICAgICBjaGFydERhdGE6IHsKICAgICAgICBsYWJlbHM6IFsiU3RhdHVzIl0sCiAgICAgICAgZGF0YXNldHM6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgbGFiZWw6ICJUb3RhbCBUcmlwcyIsCiAgICAgICAgICAgIHZhbHVlOiAidG90YWxUcmlwcyIsCiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogImJsdWUiLAogICAgICAgICAgICBib3JkZXJDb2xvcjogIiM3MTZBQ0EiLAogICAgICAgICAgICBkYXRhOiBbXSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIGxhYmVsOiAiQWNjZXB0ZWQiLAogICAgICAgICAgICB2YWx1ZTogImFjY2VwdGVkVHJpcHMiLAogICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICJncmVlbiIsCiAgICAgICAgICAgIGJvcmRlckNvbG9yOiAiIzcxNkFDQSIsCiAgICAgICAgICAgIGRhdGE6IFtdLAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgbGFiZWw6ICJObyBTaG93IFRyaXBzIiwKICAgICAgICAgICAgdmFsdWU6ICJub1Nob3dUcmlwcyIsCiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogIm9yYW5nZSIsCiAgICAgICAgICAgIGJvcmRlckNvbG9yOiAiIzcxNkFDQSIsCiAgICAgICAgICAgIGRhdGE6IFtdLAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgbGFiZWw6ICJNaXNzZWQiLAogICAgICAgICAgICB2YWx1ZTogIm1pc3NlZFRyaXBzIiwKICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAicmVkIiwKICAgICAgICAgICAgYm9yZGVyQ29sb3I6ICIjNzE2QUNBIiwKICAgICAgICAgICAgZGF0YTogW10sCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBsYWJlbDogIkNhbmNlbGVkIiwKICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAiZ3JleSIsCiAgICAgICAgICAgIHZhbHVlOiAiY2FuY2VsZWRUcmlwcyIsCiAgICAgICAgICAgIGJvcmRlckNvbG9yOiAiIzcxNkFDQSIsCiAgICAgICAgICAgIGRhdGE6IFtdLAogICAgICAgICAgfSwKICAgICAgICBdLAogICAgICB9LAogICAgICBkYWlseUVhcm5pbmdEZXRhaWw6IHsgdG90YWxfZWFybmluZ3M6IDAgfSwKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgdG90YWxQcmljZSgpIHsKICAgICAgcmV0dXJuIE9iamVjdC52YWx1ZXModGhpcy5kYWlseUVhcm5pbmdEZXRhaWwpLm1hcCgKICAgICAgICAoeCkgPT4gcGFyc2VJbnQoeC50b3RhbF9lYXJuaW5ncykgfHwgMAogICAgICApOwogICAgfSwKICAgIHRyaXBzVG90YWwoKSB7CiAgICAgIHJldHVybiB0aGlzLnRvdGFsUHJpY2UucmVkdWNlKHRoaXMuc3VtKTsKICAgIH0sCiAgICBteUVhcm5pbmcoKSB7CiAgICAgIHJldHVybiBNYXRoLmNlaWwodGhpcy50cmlwc1RvdGFsIC0gdGhpcy50cmlwc1RvdGFsICogMC4xKTsKICAgIH0sCiAgICB2aXRlRmVlcygpIHsKICAgICAgcmV0dXJuIE1hdGguY2VpbCh0aGlzLnRyaXBzVG90YWwgKiAwLjEpOwogICAgfSwKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmF1dGhVc2VyID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiYXV0aFVzZXIiKSk7CiAgICB0aGlzLmdldERhaWx5RWFybmluZ3MoKTsKICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgdGhpcy5jaGFydERhdGEuZGF0YXNldHMuZm9yRWFjaCgoZWxlKSA9PiB7CiAgICAgICAgZWxlLmRhdGEucHVzaCh0aGlzLmF1dGhVc2VyW2VsZS52YWx1ZV0pOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0RGFpbHlFYXJuaW5ncygpIHsKICAgICAgdGhpcy5zaG93TG9hZGluZyA9IHRydWU7CiAgICAgIG15RWFybmluZ1JlZgogICAgICAgIC5kb2MoIisyMzA1MjUzMjc2MCIpCiAgICAgICAgLmdldCgpCiAgICAgICAgLnRoZW4oKGRhdGEpID0+IHsKICAgICAgICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGRhdGEuZGF0YSgpOwogICAgICAgICAgY29uc29sZS5kaXIocmVzcG9uc2VEYXRhKTsKICAgICAgICAgIHRoaXMuZGFpbHlFYXJuaW5nRGV0YWlsID0gcmVzcG9uc2VEYXRhIHx8IHsgdG90YWxfZWFybmluZ3M6IDAgfTsKICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9KTsKICAgIH0sCiAgICBzdW0oeCwgeSkgewogICAgICByZXR1cm4geCArIHk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["Dashboard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Dashboard.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div id=\"dashboard-container\">\n    <el-row :gutter=\"20\">\n      <el-col\n        :md=\"6\"\n        :sm=\"24\"\n        v-for=\"(item, i) in earningsInformation\"\n        :key=\"i\"\n      >\n        <el-card class=\"box-card clickable\" shadow=\"hover\">\n          <el-row>\n            <el-col :span=\"18\">\n              <div class=\"o-card-title-3\">\n                {{ item.title }}\n              </div>\n              <div class=\"o-card-data\" v-show=\"!showLoading\">\n                <span v-if=\"item.title === 'Trips Total'\">\n                  {{ tripsTotal }}\n                </span>\n                <span v-else-if=\"item.title === 'My Earnings'\">\n                  {{ myEarning }}\n                </span>\n                <span v-else>\n                  {{ viteFees }}\n                </span>\n              </div>\n              <div class=\"dashboard-row dashboard-loader\" v-show=\"showLoading\">\n                <i class=\"el-icon-loading\"></i>\n              </div>\n            </el-col>\n            <el-col :span=\"6\">\n              <div class=\"o-card-icon\">\n                <i :class=\"item.icon\"></i>\n              </div>\n            </el-col>\n          </el-row>\n        </el-card>\n      </el-col>\n      <el-col :md=\"6\" :sm=\"24\">\n        <el-card class=\"box-card clickable\" shadow=\"hover\">\n          <el-row>\n            <el-col :span=\"12\" v-for=\"(item, i) in ratingInformation\" :key=\"i\">\n              <div class=\"o-card-title-3 text-center\">\n                {{ item.title }}\n              </div>\n              <div class=\"o-card-data text-center\" v-show=\"!showLoading\">\n                {{ authUser[item.value] || \"-\" }}\n              </div>\n              <div\n                class=\"dashboard-row dashboard-loader text-center\"\n                v-show=\"showLoading\"\n              >\n                <i class=\"el-icon-loading\"></i>\n              </div>\n            </el-col>\n          </el-row>\n        </el-card>\n      </el-col>\n    </el-row>\n\n    <el-row :gutter=\"20\">\n      <el-col :md=\"12\" :sm=\"24\">\n        <el-card class=\"box-card clickable\" shadow=\"hover\">\n          <div class=\"o-card-title-3\">\n            Trips Information\n          </div>\n          <bar-chart :chart-data=\"chartData\" display-legend></bar-chart>\n        </el-card>\n      </el-col>\n      <el-col :md=\"12\" :sm=\"24\">\n        <el-card class=\"box-card clickable\" shadow=\"hover\">\n          <div class=\"o-card-title-3\">\n            Trips Information\n          </div>\n          <br />\n          <el-row :gutter=\"20\">\n            <el-col\n              :md=\"12\"\n              :sm=\"24\"\n              v-for=\"(item, i) in tripsInformation\"\n              :key=\"i\"\n            >\n              <el-card class=\"box-card clickable\" shadow=\"hover\">\n                <div class=\"o-card-title-3 text-center\">\n                  {{ item.title }}\n                </div>\n                <div class=\"o-card-data text-center\">\n                  {{ authUser[item.value] || \"-\" }}\n                </div>\n              </el-card>\n            </el-col>\n          </el-row>\n        </el-card>\n      </el-col>\n    </el-row>\n    <el-row :gutter=\"20\">\n      <el-col :span=\"24\">\n        <trip-history></trip-history>\n      </el-col>\n    </el-row>\n  </div>\n</template>\n\n<script>\nimport firebase from \"../plugins/firebase\";\nconst db = firebase.firestore();\nimport BarChart from \"./Charts/BarChart\";\nconst myEarningRef = db.collection(\"dailyEarnings\");\nimport TripHistory from \"./DashboardComponents/TripHistory\";\nexport default {\n  name: \"dashboard\",\n  components: {\n    BarChart,\n    TripHistory,\n  },\n  data() {\n    return {\n      showLoading: false,\n\n      earningsInformation: [\n        {\n          title: \"Trips Total\",\n          value: \"totalTrips\",\n          icon: \"fal fa-suitcase-rolling\",\n        },\n        {\n          title: \"My Earnings\",\n          value: \"totalEarnings\",\n          icon: \"fal fa-sack-dollar\",\n        },\n        {\n          title: \"Vite Fee\",\n          value: \"\",\n          icon: \"fal fa-comment-dollar\",\n        },\n      ],\n      ratingInformation: [\n        {\n          title: \"Five Star\",\n          value: \"fiveStarTrips\",\n        },\n        {\n          title: \"Current\",\n          value: \"ratedTrips\",\n        },\n      ],\n      tripsInformation: [\n        {\n          title: \"Total\",\n          value: \"totalTrips\",\n        },\n        {\n          title: \"Accepted\",\n          value: \"acceptedTrips\",\n        },\n        {\n          title: \"No Show\",\n          value: \"noShowTrips\",\n        },\n        {\n          title: \"Missed\",\n          value: \"missedTrips\",\n        },\n        {\n          title: \"Cancelled\",\n          value: \"canceledTrips\",\n        },\n      ],\n      chartData: {\n        labels: [\"Status\"],\n        datasets: [\n          {\n            label: \"Total Trips\",\n            value: \"totalTrips\",\n            backgroundColor: \"blue\",\n            borderColor: \"#716ACA\",\n            data: [],\n          },\n          {\n            label: \"Accepted\",\n            value: \"acceptedTrips\",\n            backgroundColor: \"green\",\n            borderColor: \"#716ACA\",\n            data: [],\n          },\n          {\n            label: \"No Show Trips\",\n            value: \"noShowTrips\",\n            backgroundColor: \"orange\",\n            borderColor: \"#716ACA\",\n            data: [],\n          },\n          {\n            label: \"Missed\",\n            value: \"missedTrips\",\n            backgroundColor: \"red\",\n            borderColor: \"#716ACA\",\n            data: [],\n          },\n          {\n            label: \"Canceled\",\n            backgroundColor: \"grey\",\n            value: \"canceledTrips\",\n            borderColor: \"#716ACA\",\n            data: [],\n          },\n        ],\n      },\n      dailyEarningDetail: { total_earnings: 0 },\n    };\n  },\n  computed: {\n    totalPrice() {\n      return Object.values(this.dailyEarningDetail).map(\n        (x) => parseInt(x.total_earnings) || 0\n      );\n    },\n    tripsTotal() {\n      return this.totalPrice.reduce(this.sum);\n    },\n    myEarning() {\n      return Math.ceil(this.tripsTotal - this.tripsTotal * 0.1);\n    },\n    viteFees() {\n      return Math.ceil(this.tripsTotal * 0.1);\n    },\n  },\n  created() {\n    this.authUser = JSON.parse(localStorage.getItem(\"authUser\"));\n    this.getDailyEarnings();\n    this.$nextTick(() => {\n      this.chartData.datasets.forEach((ele) => {\n        ele.data.push(this.authUser[ele.value]);\n      });\n    });\n  },\n  methods: {\n    getDailyEarnings() {\n      this.showLoading = true;\n      myEarningRef\n        .doc(\"+23052532760\")\n        .get()\n        .then((data) => {\n          const responseData = data.data();\n          console.dir(responseData);\n          this.dailyEarningDetail = responseData || { total_earnings: 0 };\n          this.showLoading = false;\n        });\n    },\n    sum(x, y) {\n      return x + y;\n    },\n  },\n};\n</script>\n\n<style scoped></style>\n"]}]}