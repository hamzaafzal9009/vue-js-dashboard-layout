{"remainingRequest":"/Library/WebServer/Documents/Projects/vite/m-driver-dashboard/node_modules/vue-loader/lib/index.js??vue-loader-options!/Library/WebServer/Documents/Projects/vite/m-driver-dashboard/src/components/Registration/VehicleInformation.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Library/WebServer/Documents/Projects/vite/m-driver-dashboard/src/components/Registration/VehicleInformation.vue","mtime":1619377242810},{"path":"/Library/WebServer/Documents/Projects/vite/m-driver-dashboard/node_modules/babel-loader/lib/index.js","mtime":1618923163808},{"path":"/Library/WebServer/Documents/Projects/vite/m-driver-dashboard/node_modules/cache-loader/dist/cjs.js","mtime":1618923176918},{"path":"/Library/WebServer/Documents/Projects/vite/m-driver-dashboard/node_modules/vue-loader/lib/index.js","mtime":1618923178100}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBmaXJlYmFzZSBmcm9tICIuLi8uLi9wbHVnaW5zL2ZpcmViYXNlIjsKaW1wb3J0IHsgRXZlbnRTZXJ2aWNlIH0gZnJvbSAiLi4vLi4vbWFpbi5qcyI7CmNvbnN0IGRiID0gZmlyZWJhc2UuZmlyZXN0b3JlKCk7CmNvbnN0IHJlZiA9IGRiLmNvbGxlY3Rpb24oInZlaGljbGVzIik7CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgYWN0aW9uRGF0YTogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIG1hbnVmYWN0dXJlcjogIiIsCiAgICAgICAgICBtb2RlbE5hbWU6ICIiLAogICAgICAgICAgbW9kZWxZZWFyOiAiIiwKICAgICAgICAgIGxpY2Vuc2VQbGF0ZU51bWJlcjogIiIsCiAgICAgICAgICB2ZWhpY2xlQ29sb3I6ICIiLAogICAgICAgICAgbnVtYmVyT2ZTZWF0czogIiIsCiAgICAgICAgfTsKICAgICAgfSwKICAgIH0sCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZm9ybVZhbHVlczoge30sCiAgICAgIHNob3dMb2FkaW5nOiBmYWxzZSwKICAgICAgcmVxdWlyZWRSdWxlczogWyh2KSA9PiAhIXYgfHwgIlRoaXMgaXMgcmVxdWlyZWQiXSwKICAgICAgZW1haWxSdWxlczogWwogICAgICAgICh2KSA9PiAhIXYgfHwgIkUtbWFpbCBpcyByZXF1aXJlZCIsCiAgICAgICAgKHYpID0+IC8uK0AuK1wuLisvLnRlc3QodikgfHwgIkUtbWFpbCBtdXN0IGJlIHZhbGlkIiwKICAgICAgXSwKICAgIH07CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5hdXRoVXNlciA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImF1dGhVc2VyIikpOwogICAgaWYgKAogICAgICB0aGlzLmFjdGlvbkRhdGEubWFudWZhY3R1cmVyICE9ICIiICYmCiAgICAgIHRoaXMuYWN0aW9uRGF0YS5tb2RlbE5hbWUgIT0gIiIgJiYKICAgICAgdGhpcy5hY3Rpb25EYXRhLm1vZGVsWWVhciAhPSAiIiAmJgogICAgICB0aGlzLmFjdGlvbkRhdGEubGljZW5zZVBsYXRlTnVtYmVyICE9ICIiICYmCiAgICAgIHRoaXMuYWN0aW9uRGF0YS52ZWhpY2xlQ29sb3IgIT0gIiIgJiYKICAgICAgdGhpcy5hY3Rpb25EYXRhLm51bWJlck9mU2VhdHMgIT0gIiIKICAgICkgewogICAgICB0aGlzLmZvcm1WYWx1ZXMgPSB7IC4uLnRoaXMuYWN0aW9uRGF0YSB9OwogICAgfSBlbHNlIHsKICAgICAgZmlyZWJhc2UKICAgICAgICAuZmlyZXN0b3JlKCkKICAgICAgICAuY29sbGVjdGlvbigidmVoaWNsZXMiKQogICAgICAgIC5kb2ModGhpcy5hdXRoVXNlci5kcml2ZXJJZCkKICAgICAgICAuZ2V0KCkKICAgICAgICAudGhlbigoc25hcHNob3QpID0+IHsKICAgICAgICAgIHRoaXMuZm9ybVZhbHVlcyA9IHsgLi4uc25hcHNob3QuZGF0YSgpIH07CiAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiAoewogICAgICAgICAgZXJyb3JDb2RlOiBlcnJvci5jb2RlLAogICAgICAgICAgZXJyb3JNZXNzYWdlOiBlcnJvci5tZXNzYWdlLAogICAgICAgIH0pKTsKICAgICAgdGhpcy5mb3JtVmFsdWVzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiYXV0aFVzZXIiKSk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICB1cGRhdGVEYXRhKCkgewogICAgICBFdmVudFNlcnZpY2UuJGVtaXQoImxvYWRpbmciLCAic2hvdyIpOwogICAgICB0aGlzLnNob3dMb2FkaW5nID0gdHJ1ZTsKICAgICAgcmVmCiAgICAgICAgLmRvYyh0aGlzLmF1dGhVc2VyLmRyaXZlcklkKQogICAgICAgIC51cGRhdGUodGhpcy5mb3JtVmFsdWVzKQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIEV2ZW50U2VydmljZS4kZW1pdCgibG9hZGluZyIsICJoaWRlIik7CiAgICAgICAgICBFdmVudFNlcnZpY2UuJGVtaXQoInN1Y2Nlc3NNZXNzYWdlIiwgIlVwZGF0ZWQgU3VjY2Vzc2Z1bCIpOwogICAgICAgICAgdGhpcy4kZW1pdCgicmVmcmVzaCIpOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgY29uc29sZS5sb2coCiAgICAgICAgICAgICLwn5qAIH4gZmlsZTogVmVoaWNsZS52dWUgfiBsaW5lIDI2MyB+IHVwZGF0ZURhdGEgfiBlcnJvciIsCiAgICAgICAgICAgIGVycm9yCiAgICAgICAgICApOwogICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgRXZlbnRTZXJ2aWNlLiRlbWl0KCJsb2FkaW5nIiwgImhpZGUiKTsKICAgICAgICB9KTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["VehicleInformation.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"VehicleInformation.vue","sourceRoot":"src/components/Registration","sourcesContent":["<template>\n  <div>\n    <el-row :gutter=\"20\">\n      <el-col :span=\"12\">\n        <el-input\n          placeholder=\"Manufacturer...\"\n          v-model=\"formValues.manufacturer\"\n          :rules=\"requiredRules\"\n        ></el-input>\n      </el-col>\n      <el-col :span=\"12\">\n        <el-input\n          placeholder=\"Modal...\"\n          v-model=\"formValues.modelName\"\n          :rules=\"requiredRules\"\n        ></el-input>\n      </el-col>\n      <el-col :span=\"12\">\n        <el-input\n          placeholder=\"Manufacture Year...\"\n          v-model=\"formValues.modelYear\"\n          :rules=\"requiredRules\"\n        ></el-input>\n      </el-col>\n      <el-col :span=\"12\">\n        <el-input\n          placeholder=\"Color...\"\n          v-model=\"formValues.vehicleColor\"\n          :rules=\"requiredRules\"\n        ></el-input>\n      </el-col>\n      <el-col :span=\"12\">\n        <el-input\n          placeholder=\"License Plate...\"\n          v-model=\"formValues.licensePlateNumber\"\n          :rules=\"requiredRules\"\n        ></el-input>\n      </el-col>\n      <el-col :span=\"12\">\n        <el-input\n          placeholder=\"No. of Seats...\"\n          v-model=\"formValues.numberOfSeats\"\n          :rules=\"requiredRules\"\n        ></el-input>\n      </el-col>\n    </el-row>\n    <el-button type=\"primary\" @click=\"updateData\" :loading=\"showLoading\"\n      >Update</el-button\n    >\n  </div>\n</template>\n<script>\nimport firebase from \"../../plugins/firebase\";\nimport { EventService } from \"../../main.js\";\nconst db = firebase.firestore();\nconst ref = db.collection(\"vehicles\");\nexport default {\n  props: {\n    actionData: {\n      type: Object,\n      default() {\n        return {\n          manufacturer: \"\",\n          modelName: \"\",\n          modelYear: \"\",\n          licensePlateNumber: \"\",\n          vehicleColor: \"\",\n          numberOfSeats: \"\",\n        };\n      },\n    },\n  },\n  data() {\n    return {\n      formValues: {},\n      showLoading: false,\n      requiredRules: [(v) => !!v || \"This is required\"],\n      emailRules: [\n        (v) => !!v || \"E-mail is required\",\n        (v) => /.+@.+\\..+/.test(v) || \"E-mail must be valid\",\n      ],\n    };\n  },\n  created() {\n    this.authUser = JSON.parse(localStorage.getItem(\"authUser\"));\n    if (\n      this.actionData.manufacturer != \"\" &&\n      this.actionData.modelName != \"\" &&\n      this.actionData.modelYear != \"\" &&\n      this.actionData.licensePlateNumber != \"\" &&\n      this.actionData.vehicleColor != \"\" &&\n      this.actionData.numberOfSeats != \"\"\n    ) {\n      this.formValues = { ...this.actionData };\n    } else {\n      firebase\n        .firestore()\n        .collection(\"vehicles\")\n        .doc(this.authUser.driverId)\n        .get()\n        .then((snapshot) => {\n          this.formValues = { ...snapshot.data() };\n          this.showLoading = false;\n        })\n        .catch((error) => ({\n          errorCode: error.code,\n          errorMessage: error.message,\n        }));\n      this.formValues = JSON.parse(localStorage.getItem(\"authUser\"));\n    }\n  },\n  methods: {\n    updateData() {\n      EventService.$emit(\"loading\", \"show\");\n      this.showLoading = true;\n      ref\n        .doc(this.authUser.driverId)\n        .update(this.formValues)\n        .then(() => {\n          EventService.$emit(\"loading\", \"hide\");\n          EventService.$emit(\"successMessage\", \"Updated Successful\");\n          this.$emit(\"refresh\");\n        })\n        .catch((error) => {\n          console.log(\n            \"ðŸš€ ~ file: Vehicle.vue ~ line 263 ~ updateData ~ error\",\n            error\n          );\n          this.showLoading = false;\n          EventService.$emit(\"loading\", \"hide\");\n        });\n    },\n  },\n};\n</script>\n\n<style scoped></style>\n"]}]}