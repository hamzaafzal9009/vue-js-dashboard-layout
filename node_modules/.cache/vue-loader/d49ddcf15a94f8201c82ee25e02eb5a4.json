{"remainingRequest":"/Library/WebServer/Documents/Projects/vue/mViteDashboard/node_modules/vue-loader/lib/index.js??vue-loader-options!/Library/WebServer/Documents/Projects/vue/mViteDashboard/src/components/RidersComponents/Documents.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Library/WebServer/Documents/Projects/vue/mViteDashboard/src/components/RidersComponents/Documents.vue","mtime":1615416187279},{"path":"/Library/WebServer/Documents/Projects/vue/mViteDashboard/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/vue/mViteDashboard/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Library/WebServer/Documents/Projects/vue/mViteDashboard/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/vue/mViteDashboard/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBmaXJlYmFzZSBmcm9tICJmaXJlYmFzZS9hcHAiOwppbXBvcnQgImZpcmViYXNlL2ZpcmVzdG9yZSI7CmNvbnN0IGRiID0gZmlyZWJhc2UuZmlyZXN0b3JlKCk7CmNvbnN0IHJpZGVyc1JlZiA9IGRiLmNvbGxlY3Rpb24oInJpZGVycyIpOwppbXBvcnQgeyBFdmVudFNlcnZpY2UgfSBmcm9tICIuLi8uLi9tYWluIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBJbWFnZVVwbG9hZDogKCkgPT4gaW1wb3J0KCIuL0ltYWdlVXBsb2FkIiksCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hvd0ltYWdlczogZmFsc2UsCiAgICAgIHNpbWlsYXJJbWFnZTogIiIsCiAgICAgIHRpdGxlOiAiIiwKICAgICAgY3VycmVudFVzZXI6IHt9LAogICAgICB2ZWhpY2xlRGV0YWlsOiB7fSwKICAgICAgaW1hZ2VEaWFsb2c6IGZhbHNlLAogICAgICBpbWFnZVVybDogIiIsCiAgICAgIGltYWdlTmFtZTogIiIsCiAgICAgIGRvY3VtZW50czogWwogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAiUmlkZXIgUGhvdG8iLAogICAgICAgICAgdmFsdWU6ICJ1c2VyQXZhdGFyVXJsIiwKICAgICAgICAgIG5hbWU6ICJwcm9maWxlUGhvdG8iLAogICAgICAgICAgc3JjOiAiaHR0cHM6Ly9jZG4udnVldGlmeWpzLmNvbS9pbWFnZXMvY2FyZHMvc3RvcmUuanBnIiwKICAgICAgICB9LAogICAgICBdLAogICAgICBjdXJyZW50VmFsdWU6IFtdLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgY3VycmVudFR5cGU6ICIiLAogICAgICBjdXJyZW50TmFtZTogIiIsCiAgICAgIGN1cnJlbnRQYXRoOiAiIiwKICAgIH07CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5nZXREcml2ZXJJbmZvKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBvcGVudmlld0RpYWxvZyhkZXRhaWwsIGltYWdlKSB7CiAgICAgIHRoaXMuc2ltaWxhckltYWdlID0gaW1hZ2U7CiAgICAgIHRoaXMuc2hvd0ltYWdlcyA9IHRydWU7CiAgICB9LAogICAgb3BlbkltYWdlRGlhbG9nKGRldGFpbCwgdHlwZSkgewogICAgICB0aGlzLnRpdGxlID0gZGV0YWlsLnRpdGxlOwogICAgICB0aGlzLmltYWdlRGlhbG9nID0gdHJ1ZTsKICAgICAgdGhpcy5jdXJyZW50VmFsdWUgPSBkZXRhaWwudmFsdWU7CiAgICAgIHRoaXMuY3VycmVudFR5cGUgPSB0eXBlOwogICAgICB0aGlzLmN1cnJlbnROYW1lID0gZGV0YWlsLm5hbWU7CiAgICAgIHRoaXMuY3VycmVudFBhdGggPSBkZXRhaWwucGF0aDsKICAgIH0sCiAgICBnZXREcml2ZXJJbmZvKCkgewogICAgICBFdmVudFNlcnZpY2UuJGVtaXQoImxvYWRpbmciLCAic2hvdyIpOwogICAgICByaWRlcnNSZWYKICAgICAgICAuZG9jKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkKICAgICAgICAuZ2V0KCkKICAgICAgICAudGhlbigoc25hcHNob3QpID0+IHsKICAgICAgICAgIHRoaXMuY3VycmVudFVzZXIgPSB7IC4uLnNuYXBzaG90LmRhdGEoKSB9OwogICAgICAgICAgRXZlbnRTZXJ2aWNlLiRlbWl0KCJsb2FkaW5nIiwgImhpZGUiKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+ICh7CiAgICAgICAgICBlcnJvckNvZGU6IGVycm9yLmNvZGUsCiAgICAgICAgICBlcnJvck1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsCiAgICAgICAgfSkpOwogICAgfSwKICAgIHVwZGF0ZVByb2ZpbGVJbWFnZShpbWFnZSkgewogICAgICB0aGlzLmltYWdlVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChpbWFnZSk7CiAgICAgIHRoaXMuaW1hZ2VEaWFsb2cgPSBmYWxzZTsKICAgICAgaWYgKHRoaXMuY3VycmVudFR5cGUgPT09ICJpc1Byb2ZpbGUiKSB7CiAgICAgICAgdGhpcy51cGRhdGVSaWRlckltYWdlKGltYWdlLCB0aGlzLmN1cnJlbnRWYWx1ZSwgdGhpcy5jdXJyZW50TmFtZSk7CiAgICAgIH0KICAgIH0sCiAgICB1cGRhdGVSaWRlckltYWdlKGltYWdlLCB2YWx1ZSwgbmFtZSkgewogICAgICBFdmVudFNlcnZpY2UuJGVtaXQoImxvYWRpbmciLCAic2hvdyIpOwogICAgICBmaXJlYmFzZQogICAgICAgIC5zdG9yYWdlKCkKICAgICAgICAucmVmKGAvcmlkZXJzLyR7dGhpcy4kcm91dGUucGFyYW1zLmlkfS8ke25hbWV9YCkKICAgICAgICAucHV0KGltYWdlLCB7IGNvbnRlbnRUeXBlOiBgaW1hZ2UvanBnYCB9KQogICAgICAgIC50aGVuKChzbmFwc2hvdCkgPT4gewogICAgICAgICAgc25hcHNob3QucmVmLmdldERvd25sb2FkVVJMKCkudGhlbigodXJsKSA9PiB7CiAgICAgICAgICAgIHJpZGVyc1JlZgogICAgICAgICAgICAgIC5kb2ModGhpcy4kcm91dGUucGFyYW1zLmlkKQogICAgICAgICAgICAgIC51cGRhdGUoeyBbdmFsdWVdOiB1cmwgfSkKICAgICAgICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICBFdmVudFNlcnZpY2UuJGVtaXQoInN1Y2Nlc3NNZXNzYWdlIiwgIlVwZGF0ZWQgU3VjY2Vzc2Z1bCIpOwogICAgICAgICAgICAgICAgdGhpcy5kcml2ZXJzSW5mbygpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfSkKICAgICAgICAuZmluYWxseSgoKSA9PiB7CiAgICAgICAgICBFdmVudFNlcnZpY2UuJGVtaXQoImxvYWRpbmciLCAiaGlkZSIpOwogICAgICAgIH0pOwogICAgfSwKICAgIGRyaXZlcnNJbmZvKCkgewogICAgICBFdmVudFNlcnZpY2UuJGVtaXQoImxvYWRpbmciLCAic2hvdyIpOwogICAgICByaWRlcnNSZWYKICAgICAgICAuZG9jKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkKICAgICAgICAuZ2V0KCkKICAgICAgICAudGhlbigoc25hcHNob3QpID0+IHsKICAgICAgICAgIHRoaXMuY3VycmVudFVzZXIgPSBzbmFwc2hvdC5kYXRhKCk7CiAgICAgICAgICBFdmVudFNlcnZpY2UuJGVtaXQoImxvYWRpbmciLCAiaGlkZSIpOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gKHsKICAgICAgICAgIGVycm9yQ29kZTogZXJyb3IuY29kZSwKICAgICAgICAgIGVycm9yTWVzc2FnZTogZXJyb3IubWVzc2FnZSwKICAgICAgICB9KSk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["Documents.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Documents.vue","sourceRoot":"src/components/RidersComponents","sourcesContent":["<template>\n  <div id=\"dashboard-container\">\n    <el-row :gutter=\"20\">\n      <el-col\n        v-for=\"(item, index) in documents\"\n        :key=\"index\"\n        :xs=\"24\"\n        :sm=\"24\"\n        :md=\"8\"\n      >\n        <el-card>\n          <div class=\"card-header\">\n            <div class=\"card-title\">\n              <h3>{{ item.title }}</h3>\n            </div>\n            <div class=\"card-actions\">\n              <el-button\n                icon=\"el-icon-edit\"\n                circle\n                @click=\"openImageDialog(item, 'isProfile')\"\n              ></el-button>\n            </div>\n          </div>\n          <div class=\"card-body\">\n            <el-image\n              style=\"width: 100%; height: 175px; cursor: pointer\"\n              @click=\"openviewDialog(item, currentUser[item.value])\"\n              :src=\"currentUser[item.value]\"\n              fit=\"contain\"\n            ></el-image>\n          </div>\n        </el-card>\n      </el-col>\n    </el-row>\n\n    <el-dialog :visible.sync=\"showImages\" width=\"30%\">\n      <el-image\n        style=\"width: 100%; height: 100%; cursor: pointer\"\n        :src=\"similarImage\"\n        fit=\"contain\"\n      ></el-image>\n    </el-dialog>\n    <ImageUpload\n      v-if=\"imageDialog\"\n      v-model=\"imageName\"\n      :resize=\"false\"\n      :title=\"title\"\n      @close=\"imageDialog = false\"\n      @imageName=\"imageName = $event\"\n      @input=\"updateProfileImage\"\n    />\n  </div>\n</template>\n<script>\nimport firebase from \"firebase/app\";\nimport \"firebase/firestore\";\nconst db = firebase.firestore();\nconst ridersRef = db.collection(\"riders\");\nimport { EventService } from \"../../main\";\n\nexport default {\n  components: {\n    ImageUpload: () => import(\"./ImageUpload\"),\n  },\n  data() {\n    return {\n      showImages: false,\n      similarImage: \"\",\n      title: \"\",\n      currentUser: {},\n      vehicleDetail: {},\n      imageDialog: false,\n      imageUrl: \"\",\n      imageName: \"\",\n      documents: [\n        {\n          title: \"Rider Photo\",\n          value: \"userAvatarUrl\",\n          name: \"profilePhoto\",\n          src: \"https://cdn.vuetifyjs.com/images/cards/store.jpg\",\n        },\n      ],\n      currentValue: [],\n      loading: false,\n      currentType: \"\",\n      currentName: \"\",\n      currentPath: \"\",\n    };\n  },\n  created() {\n    this.getDriverInfo();\n  },\n  methods: {\n    openviewDialog(detail, image) {\n      this.similarImage = image;\n      this.showImages = true;\n    },\n    openImageDialog(detail, type) {\n      this.title = detail.title;\n      this.imageDialog = true;\n      this.currentValue = detail.value;\n      this.currentType = type;\n      this.currentName = detail.name;\n      this.currentPath = detail.path;\n    },\n    getDriverInfo() {\n      EventService.$emit(\"loading\", \"show\");\n      ridersRef\n        .doc(this.$route.params.id)\n        .get()\n        .then((snapshot) => {\n          this.currentUser = { ...snapshot.data() };\n          EventService.$emit(\"loading\", \"hide\");\n        })\n        .catch((error) => ({\n          errorCode: error.code,\n          errorMessage: error.message,\n        }));\n    },\n    updateProfileImage(image) {\n      this.imageUrl = URL.createObjectURL(image);\n      this.imageDialog = false;\n      if (this.currentType === \"isProfile\") {\n        this.updateRiderImage(image, this.currentValue, this.currentName);\n      }\n    },\n    updateRiderImage(image, value, name) {\n      EventService.$emit(\"loading\", \"show\");\n      firebase\n        .storage()\n        .ref(`/riders/${this.$route.params.id}/${name}`)\n        .put(image, { contentType: `image/jpg` })\n        .then((snapshot) => {\n          snapshot.ref.getDownloadURL().then((url) => {\n            ridersRef\n              .doc(this.$route.params.id)\n              .update({ [value]: url })\n              .then(() => {\n                EventService.$emit(\"successMessage\", \"Updated Successful\");\n                this.driversInfo();\n              });\n          });\n        })\n        .finally(() => {\n          EventService.$emit(\"loading\", \"hide\");\n        });\n    },\n    driversInfo() {\n      EventService.$emit(\"loading\", \"show\");\n      ridersRef\n        .doc(this.$route.params.id)\n        .get()\n        .then((snapshot) => {\n          this.currentUser = snapshot.data();\n          EventService.$emit(\"loading\", \"hide\");\n        })\n        .catch((error) => ({\n          errorCode: error.code,\n          errorMessage: error.message,\n        }));\n    },\n  },\n};\n</script>\n"]}]}