{"remainingRequest":"/Library/WebServer/Documents/Projects/vue/Vite Dashboard/node_modules/vue-loader/lib/index.js??vue-loader-options!/Library/WebServer/Documents/Projects/vue/Vite Dashboard/src/components/RidersComponents/Documents.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Library/WebServer/Documents/Projects/vue/Vite Dashboard/src/components/RidersComponents/Documents.vue","mtime":1615415944975},{"path":"/Library/WebServer/Documents/Projects/vue/Vite Dashboard/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/vue/Vite Dashboard/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Library/WebServer/Documents/Projects/vue/Vite Dashboard/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/vue/Vite Dashboard/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KCmltcG9ydCBmaXJlYmFzZSBmcm9tICJmaXJlYmFzZS9hcHAiOwppbXBvcnQgImZpcmViYXNlL2ZpcmVzdG9yZSI7CmNvbnN0IGRiID0gZmlyZWJhc2UuZmlyZXN0b3JlKCk7CmNvbnN0IHJpZGVyc1JlZiA9IGRiLmNvbGxlY3Rpb24oInJpZGVycyIpOwppbXBvcnQgeyBFdmVudFNlcnZpY2UgfSBmcm9tICIuLi8uLi9tYWluIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBJbWFnZVVwbG9hZDogKCkgPT4gaW1wb3J0KCIuL0ltYWdlVXBsb2FkIiksCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdGl0bGU6ICIiLAogICAgICBjdXJyZW50VXNlcjoge30sCiAgICAgIHZlaGljbGVEZXRhaWw6IHt9LAogICAgICBpbWFnZURpYWxvZzogZmFsc2UsCiAgICAgIGltYWdlVXJsOiAiIiwKICAgICAgaW1hZ2VOYW1lOiAiIiwKICAgICAgZG9jdW1lbnRzOiBbCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICJSaWRlciBQaG90byIsCiAgICAgICAgICB2YWx1ZTogInVzZXJBdmF0YXJVcmwiLAogICAgICAgICAgbmFtZTogInByb2ZpbGVQaG90byIsCiAgICAgICAgICBzcmM6ICJodHRwczovL2Nkbi52dWV0aWZ5anMuY29tL2ltYWdlcy9jYXJkcy9zdG9yZS5qcGciLAogICAgICAgIH0sCiAgICAgIF0sCiAgICAgIGN1cnJlbnRWYWx1ZTogW10sCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBjdXJyZW50VHlwZTogIiIsCiAgICAgIGN1cnJlbnROYW1lOiAiIiwKICAgICAgY3VycmVudFBhdGg6ICIiLAogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldERyaXZlckluZm8oKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIG9wZW5JbWFnZURpYWxvZyhkZXRhaWwsIHR5cGUpIHsKICAgICAgdGhpcy50aXRsZSA9IGRldGFpbC50aXRsZTsKICAgICAgdGhpcy5pbWFnZURpYWxvZyA9IHRydWU7CiAgICAgIHRoaXMuY3VycmVudFZhbHVlID0gZGV0YWlsLnZhbHVlOwogICAgICB0aGlzLmN1cnJlbnRUeXBlID0gdHlwZTsKICAgICAgdGhpcy5jdXJyZW50TmFtZSA9IGRldGFpbC5uYW1lOwogICAgICB0aGlzLmN1cnJlbnRQYXRoID0gZGV0YWlsLnBhdGg7CiAgICB9LAogICAgZ2V0RHJpdmVySW5mbygpIHsKICAgICAgRXZlbnRTZXJ2aWNlLiRlbWl0KCJsb2FkaW5nIiwgInNob3ciKTsKICAgICAgcmlkZXJzUmVmCiAgICAgICAgLmRvYyh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpCiAgICAgICAgLmdldCgpCiAgICAgICAgLnRoZW4oKHNuYXBzaG90KSA9PiB7CiAgICAgICAgICB0aGlzLmN1cnJlbnRVc2VyID0geyAuLi5zbmFwc2hvdC5kYXRhKCkgfTsKICAgICAgICAgIEV2ZW50U2VydmljZS4kZW1pdCgibG9hZGluZyIsICJoaWRlIik7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiAoewogICAgICAgICAgZXJyb3JDb2RlOiBlcnJvci5jb2RlLAogICAgICAgICAgZXJyb3JNZXNzYWdlOiBlcnJvci5tZXNzYWdlLAogICAgICAgIH0pKTsKICAgIH0sCiAgICB1cGRhdGVQcm9maWxlSW1hZ2UoaW1hZ2UpIHsKICAgICAgdGhpcy5pbWFnZVVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoaW1hZ2UpOwogICAgICB0aGlzLmltYWdlRGlhbG9nID0gZmFsc2U7CiAgICAgIGlmICh0aGlzLmN1cnJlbnRUeXBlID09PSAiaXNQcm9maWxlIikgewogICAgICAgIHRoaXMudXBkYXRlUmlkZXJJbWFnZShpbWFnZSwgdGhpcy5jdXJyZW50VmFsdWUsIHRoaXMuY3VycmVudE5hbWUpOwogICAgICB9CiAgICB9LAogICAgdXBkYXRlUmlkZXJJbWFnZShpbWFnZSwgdmFsdWUsIG5hbWUpIHsKICAgICAgRXZlbnRTZXJ2aWNlLiRlbWl0KCJsb2FkaW5nIiwgInNob3ciKTsKICAgICAgZmlyZWJhc2UKICAgICAgICAuc3RvcmFnZSgpCiAgICAgICAgLnJlZihgL3JpZGVycy8ke3RoaXMuJHJvdXRlLnBhcmFtcy5pZH0vJHtuYW1lfWApCiAgICAgICAgLnB1dChpbWFnZSwgeyBjb250ZW50VHlwZTogYGltYWdlL2pwZ2AgfSkKICAgICAgICAudGhlbigoc25hcHNob3QpID0+IHsKICAgICAgICAgIHNuYXBzaG90LnJlZi5nZXREb3dubG9hZFVSTCgpLnRoZW4oKHVybCkgPT4gewogICAgICAgICAgICByaWRlcnNSZWYKICAgICAgICAgICAgICAuZG9jKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkKICAgICAgICAgICAgICAudXBkYXRlKHsgW3ZhbHVlXTogdXJsIH0pCiAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgRXZlbnRTZXJ2aWNlLiRlbWl0KCJzdWNjZXNzTWVzc2FnZSIsICJVcGRhdGVkIFN1Y2Nlc3NmdWwiKTsKICAgICAgICAgICAgICAgIHRoaXMuZHJpdmVyc0luZm8oKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0pCiAgICAgICAgLmZpbmFsbHkoKCkgPT4gewogICAgICAgICAgRXZlbnRTZXJ2aWNlLiRlbWl0KCJsb2FkaW5nIiwgImhpZGUiKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBkcml2ZXJzSW5mbygpIHsKICAgICAgRXZlbnRTZXJ2aWNlLiRlbWl0KCJsb2FkaW5nIiwgInNob3ciKTsKICAgICAgcmlkZXJzUmVmCiAgICAgICAgLmRvYyh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpCiAgICAgICAgLmdldCgpCiAgICAgICAgLnRoZW4oKHNuYXBzaG90KSA9PiB7CiAgICAgICAgICB0aGlzLmN1cnJlbnRVc2VyID0gc25hcHNob3QuZGF0YSgpOwogICAgICAgICAgRXZlbnRTZXJ2aWNlLiRlbWl0KCJsb2FkaW5nIiwgImhpZGUiKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+ICh7CiAgICAgICAgICBlcnJvckNvZGU6IGVycm9yLmNvZGUsCiAgICAgICAgICBlcnJvck1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsCiAgICAgICAgfSkpOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["Documents.vue"],"names":[],"mappings":";;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Documents.vue","sourceRoot":"src/components/RidersComponents","sourcesContent":["<template> </template>\n\n<script>\nimport firebase from \"firebase/app\";\nimport \"firebase/firestore\";\nconst db = firebase.firestore();\nconst ridersRef = db.collection(\"riders\");\nimport { EventService } from \"../../main\";\n\nexport default {\n  components: {\n    ImageUpload: () => import(\"./ImageUpload\"),\n  },\n  data() {\n    return {\n      title: \"\",\n      currentUser: {},\n      vehicleDetail: {},\n      imageDialog: false,\n      imageUrl: \"\",\n      imageName: \"\",\n      documents: [\n        {\n          title: \"Rider Photo\",\n          value: \"userAvatarUrl\",\n          name: \"profilePhoto\",\n          src: \"https://cdn.vuetifyjs.com/images/cards/store.jpg\",\n        },\n      ],\n      currentValue: [],\n      loading: false,\n      currentType: \"\",\n      currentName: \"\",\n      currentPath: \"\",\n    };\n  },\n  created() {\n    this.getDriverInfo();\n  },\n  methods: {\n    openImageDialog(detail, type) {\n      this.title = detail.title;\n      this.imageDialog = true;\n      this.currentValue = detail.value;\n      this.currentType = type;\n      this.currentName = detail.name;\n      this.currentPath = detail.path;\n    },\n    getDriverInfo() {\n      EventService.$emit(\"loading\", \"show\");\n      ridersRef\n        .doc(this.$route.params.id)\n        .get()\n        .then((snapshot) => {\n          this.currentUser = { ...snapshot.data() };\n          EventService.$emit(\"loading\", \"hide\");\n        })\n        .catch((error) => ({\n          errorCode: error.code,\n          errorMessage: error.message,\n        }));\n    },\n    updateProfileImage(image) {\n      this.imageUrl = URL.createObjectURL(image);\n      this.imageDialog = false;\n      if (this.currentType === \"isProfile\") {\n        this.updateRiderImage(image, this.currentValue, this.currentName);\n      }\n    },\n    updateRiderImage(image, value, name) {\n      EventService.$emit(\"loading\", \"show\");\n      firebase\n        .storage()\n        .ref(`/riders/${this.$route.params.id}/${name}`)\n        .put(image, { contentType: `image/jpg` })\n        .then((snapshot) => {\n          snapshot.ref.getDownloadURL().then((url) => {\n            ridersRef\n              .doc(this.$route.params.id)\n              .update({ [value]: url })\n              .then(() => {\n                EventService.$emit(\"successMessage\", \"Updated Successful\");\n                this.driversInfo();\n              });\n          });\n        })\n        .finally(() => {\n          EventService.$emit(\"loading\", \"hide\");\n        });\n    },\n    driversInfo() {\n      EventService.$emit(\"loading\", \"show\");\n      ridersRef\n        .doc(this.$route.params.id)\n        .get()\n        .then((snapshot) => {\n          this.currentUser = snapshot.data();\n          EventService.$emit(\"loading\", \"hide\");\n        })\n        .catch((error) => ({\n          errorCode: error.code,\n          errorMessage: error.message,\n        }));\n    },\n  },\n};\n</script>\n"]}]}