{"remainingRequest":"/Library/WebServer/Documents/Projects/vue/m-driver-dashboard/node_modules/vue-loader/lib/index.js??vue-loader-options!/Library/WebServer/Documents/Projects/vue/m-driver-dashboard/src/components/DriverComponents/DriverInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Library/WebServer/Documents/Projects/vue/m-driver-dashboard/src/components/DriverComponents/DriverInfo.vue","mtime":1615664879755},{"path":"/Library/WebServer/Documents/Projects/vue/m-driver-dashboard/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/vue/m-driver-dashboard/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Library/WebServer/Documents/Projects/vue/m-driver-dashboard/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/vue/m-driver-dashboard/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBmaXJlYmFzZSBmcm9tICJmaXJlYmFzZS9hcHAiOwppbXBvcnQgImZpcmViYXNlL2ZpcmVzdG9yZSI7CmNvbnN0IGRiID0gZmlyZWJhc2UuZmlyZXN0b3JlKCk7CmNvbnN0IHJlZiA9IGRiLmNvbGxlY3Rpb24oImRyaXZlcnMiKTsKaW1wb3J0IHsgRXZlbnRTZXJ2aWNlIH0gZnJvbSAiLi4vLi4vbWFpbiI7CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvcm1WYWx1ZXM6IHsKICAgICAgICBnZW5kZXI6ICJNYWxlIiwKICAgICAgfSwKICAgICAgcmVxdWlyZWRSdWxlczogWyh2KSA9PiAhIXYgfHwgIlRoaXMgaXMgcmVxdWlyZWQiXSwKICAgICAgZW1haWxSdWxlczogWwogICAgICAgICh2KSA9PiAhIXYgfHwgIkUtbWFpbCBpcyByZXF1aXJlZCIsCiAgICAgICAgKHYpID0+IC8uK0AuK1wuLisvLnRlc3QodikgfHwgIkUtbWFpbCBtdXN0IGJlIHZhbGlkIiwKICAgICAgXSwKICAgICAgc2hvdzogZmFsc2UsCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0RHJpdmVySW5mbygpOwogIH0sIAogIG1ldGhvZHM6IHsKICAgIHVwZGF0ZURhdGEoKSB7CiAgICAgIEV2ZW50U2VydmljZS4kZW1pdCgibG9hZGluZyIsICJzaG93Iik7CiAgICAgIGlmICh0aGlzLiRyZWZzLmZvcm0udmFsaWRhdGUoKSkgewogICAgICAgIHJlZgogICAgICAgICAgLmRvYyh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpCiAgICAgICAgICAudXBkYXRlKHRoaXMuZm9ybVZhbHVlcykKICAgICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgICAgRXZlbnRTZXJ2aWNlLiRlbWl0KCJsb2FkaW5nIiwgImhpZGUiKTsKICAgICAgICAgICAgRXZlbnRTZXJ2aWNlLiRlbWl0KAogICAgICAgICAgICAgICAgInN1Y2Nlc3NNZXNzYWdlIiwKICAgICAgICAgICAgICAgICJEcml2ZXIgVXBkYXRlZCBTdWNjZXNzZnVsLiIKICAgICAgICAgICAgICApOwogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgIEV2ZW50U2VydmljZS4kZW1pdCgibG9hZGluZyIsICJoaWRlIik7CiAgICAgICAgICAgIEV2ZW50U2VydmljZS4kZW1pdCgKICAgICAgICAgICAgICAgICJlcnJvck1lc3NhZ2UiLAogICAgICAgICAgICAgICAgIlNvbWV0aGluZyBXZW50IFdyb25nLiIKICAgICAgICAgICAgICApOwogICAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBnZXREcml2ZXJJbmZvKCkgewogICAgICBFdmVudFNlcnZpY2UuJGVtaXQoImxvYWRpbmciLCAic2hvdyIpOwogICAgICBmaXJlYmFzZQogICAgICAgIC5maXJlc3RvcmUoKQogICAgICAgIC5jb2xsZWN0aW9uKCJkcml2ZXJzIikKICAgICAgICAuZG9jKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkKICAgICAgICAuZ2V0KCkKICAgICAgICAudGhlbigoc25hcHNob3QpID0+IHsKICAgICAgICAgIHRoaXMuZm9ybVZhbHVlcyA9IHsgLi4uc25hcHNob3QuZGF0YSgpIH07CiAgICAgICAgICB0aGlzLmZvcm1WYWx1ZXMuZHJpdmVyR2VuZGVyID0gc25hcHNob3QuZGF0YSgpLmRyaXZlckdlbmRlcjsKICAgICAgICAgIGxldCBtRGF0YSA9IG5ldyBEYXRlKHNuYXBzaG90LmRhdGEoKS5kcml2ZXJEb2IgKiAxMDAwKTsKICAgICAgICAgIHRoaXMuZm9ybVZhbHVlcy5kcml2ZXJEb2IgPSBtRGF0YS50b0dNVFN0cmluZygpCiAgICAgICAgICBjb25zb2xlLmRpcih0aGlzLmZvcm1WYWx1ZXMpOwogICAgICAgICAgRXZlbnRTZXJ2aWNlLiRlbWl0KCJsb2FkaW5nIiwgImhpZGUiKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIEV2ZW50U2VydmljZS4kZW1pdCgibG9hZGluZyIsICJoaWRlIik7CiAgICAgICAgICBFdmVudFNlcnZpY2UuJGVtaXQoCiAgICAgICAgICAgICAgICAiZXJyb3JNZXNzYWdlIiwKICAgICAgICAgICAgICAgICJEcml2ZXIgRGVsZXRlZCBTdWNjZXNzZnVsLiIKICAgICAgICAgICAgICApOwogICAgICAgIH0pOwogICAgfSwKICAgIHJlZnJlc2hEYXRhKCkgewogICAgICB0aGlzLm9wZW5Qcm9maWxlRWRpdEZvcm0gPSBmYWxzZTsKICAgICAgZmlyZWJhc2UKICAgICAgICAuZmlyZXN0b3JlKCkKICAgICAgICAuY29sbGVjdGlvbigiZHJpdmVycyIpCiAgICAgICAgLmRvYyh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpCiAgICAgICAgLmdldCgpCiAgICAgICAgLnRoZW4oKHNuYXBzaG90KSA9PiB7CiAgICAgICAgICB0aGlzLmZvcm1WYWx1ZXMgPSB7IC4uLnNuYXBzaG90LmRhdGEoKSB9OwogICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiYXV0aFVzZXIiLCBKU09OLnN0cmluZ2lmeShzbmFwc2hvdC5kYXRhKCkpKTsKICAgICAgICAgICAgdGhpcy5hdXRoVXNlciA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImF1dGhBZG1pbiIpKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gKHsKICAgICAgICAgIGVycm9yQ29kZTogZXJyb3IuY29kZSwKICAgICAgICAgIGVycm9yTWVzc2FnZTogZXJyb3IubWVzc2FnZSwKICAgICAgICB9KSk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["DriverInfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+FA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DriverInfo.vue","sourceRoot":"src/components/DriverComponents","sourcesContent":["<template>\n  <el-row>\n    <el-form ref=\"form\" label-width=\"120px\">\n      <el-form-item label=\"Driver Name\" required>\n        <el-col :span=\"11\">\n          <el-input\n            type=\"text\"\n            placeholder=\"First Name\"\n            v-model=\"formValues.driverFirstName\"\n            :rules=\"requiredRules\"\n            style=\"width: 100%;\"\n          ></el-input>\n        </el-col>\n\n        <el-col :span=\"12\" :offset=\"1\">\n          <el-input\n            type=\"text\"\n            placeholder=\"Last Name\"\n            :rules=\"requiredRules\"\n            v-model=\"formValues.driverLastName\"\n            style=\"width: 100%;\"\n          ></el-input>\n        </el-col>\n      </el-form-item>\n      <el-form-item label=\"Contact Info\" required>\n        <el-col :span=\"11\">\n          <el-input\n            type=\"email\"\n            placeholder=\"Email Address\"\n            v-model=\"formValues.driverEmail\"\n            style=\"width: 100%;\"\n            :rules=\"emailRules\"\n          ></el-input>\n        </el-col>\n\n        <el-col :span=\"12\" :offset=\"1\">\n          <el-input\n            type=\"text\"\n            placeholder=\"Phone Number\"\n            :rules=\"requiredRules\"\n            v-model=\"formValues.driverPhoneNumber\"\n            style=\"width: 100%;\"\n          ></el-input>\n        </el-col>\n      </el-form-item>\n      <el-form-item label=\"Personal Info\" required>\n        <el-col :span=\"11\">\n          <el-input\n            type=\"text\"\n            placeholder=\"Date of Birth\"\n            :rules=\"requiredRules\"\n            v-model=\"formValues.driverDob\"\n            style=\"width: 100%;\"\n          ></el-input>\n        </el-col>\n\n        <el-col :span=\"12\" :offset=\"1\">\n          <span class=\"p-50\">Gender</span>\n          <span v-for=\"(gender, i) in ['Male', 'Female']\" :key=\"i\">\n            <el-button\n              size=\"small\"\n              round\n              :type=\"formValues.driverGender === gender ? 'primary' : ''\"\n              @click.prevent=\"\n                $nextTick(() => {\n                  formValues.driverGender = gender;\n                })\n              \"\n              >{{ gender }}</el-button\n            >\n          </span>\n        </el-col>\n      </el-form-item>\n      <el-form-item label=\"Address\" required>\n        <el-col :span=\"24\">\n          <el-input\n            type=\"textarea\"\n            placeholder=\"Personal Address\"\n            style=\"width: 100%;\"\n            :rules=\"requiredRules\"\n            v-model=\"formValues.driverHomeAddress\"\n            resize=\"none\"\n          ></el-input>\n        </el-col>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"updateData\" round\n          >Save</el-button\n        >\n      </el-form-item>\n    </el-form>\n  </el-row>\n</template>\n\n<script>\nimport firebase from \"firebase/app\";\nimport \"firebase/firestore\";\nconst db = firebase.firestore();\nconst ref = db.collection(\"drivers\");\nimport { EventService } from \"../../main\";\n\nexport default {\n  data() {\n    return {\n      formValues: {\n        gender: \"Male\",\n      },\n      requiredRules: [(v) => !!v || \"This is required\"],\n      emailRules: [\n        (v) => !!v || \"E-mail is required\",\n        (v) => /.+@.+\\..+/.test(v) || \"E-mail must be valid\",\n      ],\n      show: false,\n    };\n  },\n  created() {\n    this.getDriverInfo();\n  }, \n  methods: {\n    updateData() {\n      EventService.$emit(\"loading\", \"show\");\n      if (this.$refs.form.validate()) {\n        ref\n          .doc(this.$route.params.id)\n          .update(this.formValues)\n          .then(() => {\n            EventService.$emit(\"loading\", \"hide\");\n            EventService.$emit(\n                \"successMessage\",\n                \"Driver Updated Successful.\"\n              );\n          })\n          .catch(() => {\n            EventService.$emit(\"loading\", \"hide\");\n            EventService.$emit(\n                \"errorMessage\",\n                \"Something Went Wrong.\"\n              );\n          });\n      }\n    },\n    getDriverInfo() {\n      EventService.$emit(\"loading\", \"show\");\n      firebase\n        .firestore()\n        .collection(\"drivers\")\n        .doc(this.$route.params.id)\n        .get()\n        .then((snapshot) => {\n          this.formValues = { ...snapshot.data() };\n          this.formValues.driverGender = snapshot.data().driverGender;\n          let mData = new Date(snapshot.data().driverDob * 1000);\n          this.formValues.driverDob = mData.toGMTString()\n          console.dir(this.formValues);\n          EventService.$emit(\"loading\", \"hide\");\n        })\n        .catch((error) => {\n          EventService.$emit(\"loading\", \"hide\");\n          EventService.$emit(\n                \"errorMessage\",\n                \"Driver Deleted Successful.\"\n              );\n        });\n    },\n    refreshData() {\n      this.openProfileEditForm = false;\n      firebase\n        .firestore()\n        .collection(\"drivers\")\n        .doc(this.$route.params.id)\n        .get()\n        .then((snapshot) => {\n          this.formValues = { ...snapshot.data() };\n          this.$nextTick(() => {\n            localStorage.setItem(\"authUser\", JSON.stringify(snapshot.data()));\n            this.authUser = JSON.parse(localStorage.getItem(\"authAdmin\"));\n          });\n        })\n        .catch((error) => ({\n          errorCode: error.code,\n          errorMessage: error.message,\n        }));\n    },\n  },\n};\n</script>\n\n<style>\n.p-50 {\n  padding-right: 50px;\n}\n</style>\n"]}]}