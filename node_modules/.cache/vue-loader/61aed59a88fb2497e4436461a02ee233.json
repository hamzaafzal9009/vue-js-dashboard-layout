{"remainingRequest":"/Library/WebServer/Documents/Projects/vue/m-driver-dashboard/node_modules/vue-loader/lib/index.js??vue-loader-options!/Library/WebServer/Documents/Projects/vue/m-driver-dashboard/src/components/Documents.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Library/WebServer/Documents/Projects/vue/m-driver-dashboard/src/components/Documents.vue","mtime":1619025691871},{"path":"/Library/WebServer/Documents/Projects/vue/m-driver-dashboard/node_modules/cache-loader/dist/cjs.js","mtime":1618923176918},{"path":"/Library/WebServer/Documents/Projects/vue/m-driver-dashboard/node_modules/babel-loader/lib/index.js","mtime":1618923163808},{"path":"/Library/WebServer/Documents/Projects/vue/m-driver-dashboard/node_modules/cache-loader/dist/cjs.js","mtime":1618923176918},{"path":"/Library/WebServer/Documents/Projects/vue/m-driver-dashboard/node_modules/vue-loader/lib/index.js","mtime":1618923178100}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBJbWFnZVVwbG9hZCBmcm9tICIuL0RvY3VtZW50c0NvbXBvbmVudHMvSW1hZ2VVcGxvYWQiOwppbXBvcnQgeyBFdmVudFNlcnZpY2UgfSBmcm9tICIuLi9tYWluLmpzIjsKaW1wb3J0IGZpcmViYXNlIGZyb20gIi4uL3BsdWdpbnMvZmlyZWJhc2UiOwppbXBvcnQgImZpcmViYXNlL3N0b3JhZ2UiOwpjb25zdCBkYiA9IGZpcmViYXNlLmZpcmVzdG9yZSgpOwpjb25zdCByZWZWZWhpY2xlID0gZGIuY29sbGVjdGlvbigidmVoaWNsZXMiKTsKY29uc3QgcmVmRHJpdmVycyA9IGRiLmNvbGxlY3Rpb24oImRyaXZlcnMiKTsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsgSW1hZ2VVcGxvYWQgfSwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRpdGxlOiAiIiwKICAgICAgb3BlblByb2ZpbGVFZGl0Rm9ybTogZmFsc2UsCiAgICAgIGF1dGhVc2VyOiB7fSwKICAgICAgdmVoaWNsZURldGFpbDoge30sCiAgICAgIGltYWdlRGlhbG9nOiBmYWxzZSwKICAgICAgaW1hZ2VVcmw6ICIiLAogICAgICBpbWFnZU5hbWU6ICIiLAogICAgICBjdXJyZW50RmlsZTogIiIsCiAgICAgIGN1cnJlbnRJbmRleDogMCwKICAgICAgZm9ybVZhbHVlczoge30sCiAgICAgIGRvY3VtZW50czogWwogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAiRHJpdmVyIFBob3RvIiwKICAgICAgICAgIHZhbHVlOiAiZHJpdmVyQXZhdGFyVXJsIiwKICAgICAgICAgIG5hbWU6ICJwcm9maWxlUGhvdG8iLAogICAgICAgICAgc3JjOiAiaHR0cHM6Ly9jZG4udnVldGlmeWpzLmNvbS9pbWFnZXMvY2FyZHMvc3RvcmUuanBnIiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAiTmF0aW9uYWwgSWQiLAogICAgICAgICAgdmFsdWU6ICJkcml2ZXJJRFVybCIsCiAgICAgICAgICBuYW1lOiAiZHJpdmVyX2lkIiwKICAgICAgICAgIHNyYzogImh0dHBzOi8vY2RuLnZ1ZXRpZnlqcy5jb20vaW1hZ2VzL2NhcmRzL3N0b3JlLmpwZyIsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogIkRyaXZlciBMaWNlbnNlIiwKICAgICAgICAgIHZhbHVlOiAiZHJpdmVyTGljZW5zZVVybCIsCiAgICAgICAgICBuYW1lOiAiZHJpdmVyX2xpY2Vuc2UiLAogICAgICAgICAgc3JjOiAiaHR0cHM6Ly9jZG4udnVldGlmeWpzLmNvbS9pbWFnZXMvY2FyZHMvc3RvcmUuanBnIiwKICAgICAgICB9LAogICAgICBdLAogICAgICBjdXJyZW50VmFsdWU6IFtdLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgdmVoaWNsZURvY3M6IFsKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogIlZlaGljbGUgUGhvdG8iLAogICAgICAgICAgdmFsdWU6ICJ2ZWhpY2xlQXZhdGFyVXJsIiwKICAgICAgICAgIHBhdGg6ICJ2ZWhpY2xlcy8iLAogICAgICAgICAgc3JjOiAiaHR0cHM6Ly9jZG4udnVldGlmeWpzLmNvbS9pbWFnZXMvY2FyZHMvc3RvcmUuanBnIiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAiUFNWIFRheGkgTGljZW5zZSIsCiAgICAgICAgICB2YWx1ZTogInZlaGljbGVMaWNlbnNlVXJsIiwKICAgICAgICAgIG5leHRWYWx1ZTogInZlaGljbGVMaWNlbnNlIiwKICAgICAgICAgIHBhdGg6ICJ2ZWhpY2xlTGljZW5zZS8iLAogICAgICAgICAgc3JjOiAiaHR0cHM6Ly9jZG4udnVldGlmeWpzLmNvbS9pbWFnZXMvY2FyZHMvc3RvcmUuanBnIiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAiUHJvb2Ygb2YgSW5zdXJhbmNlIiwKICAgICAgICAgIHZhbHVlOiAicHJvb2ZPZkluc3VyYW5jZVVybCIsCiAgICAgICAgICBwYXRoOiAidmVoaWNsZXNkb2NzLyIsCiAgICAgICAgICBzcmM6ICJodHRwczovL2Nkbi52dWV0aWZ5anMuY29tL2ltYWdlcy9jYXJkcy9zdG9yZS5qcGciLAogICAgICAgIH0sCiAgICAgIF0sCiAgICAgIGN1cnJlbnRUeXBlOiAiIiwKICAgICAgaXRlbXM6IFsKICAgICAgICB7CiAgICAgICAgICB0ZXh0OiAiRGFzaGJvYXJkIiwKICAgICAgICAgIGRpc2FibGVkOiBmYWxzZSwKICAgICAgICAgIGhyZWY6ICIvZGFzaGJvYXJkIiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRleHQ6ICJEb2N1bWVudHMiLAogICAgICAgICAgZGlzYWJsZWQ6IHRydWUsCiAgICAgICAgICBocmVmOiAiYnJlYWRjcnVtYnNfbGlua18xIiwKICAgICAgICB9LAogICAgICBdLAogICAgICBjdXJyZW50TmFtZTogIiIsCiAgICAgIGN1cnJlbnRQYXRoOiAiIiwKICAgIH07CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5hdXRoVXNlciA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImF1dGhVc2VyIikpOwogICAgdGhpcy5nZXRWZWNoaWNsZUluZm8oKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIG9wZW5JbWFnZURpYWxvZyhkZXRhaWwsIHR5cGUpIHsKICAgICAgdGhpcy50aXRsZSA9IGRldGFpbC50aXRsZTsKICAgICAgdGhpcy5pbWFnZURpYWxvZyA9IHRydWU7CiAgICAgIHRoaXMuY3VycmVudFZhbHVlID0gZGV0YWlsLnZhbHVlOwogICAgICB0aGlzLmN1cnJlbnRUeXBlID0gdHlwZTsKICAgICAgdGhpcy5jdXJyZW50TmFtZSA9IGRldGFpbC5uYW1lOwogICAgICB0aGlzLmN1cnJlbnRQYXRoID0gZGV0YWlsLnBhdGg7CiAgICB9LAogICAgZ2V0VmVjaGljbGVJbmZvKCkgewogICAgICBFdmVudFNlcnZpY2UuJGVtaXQoImxvYWRpbmciLCAic2hvdyIpOwogICAgICBmaXJlYmFzZQogICAgICAgIC5maXJlc3RvcmUoKQogICAgICAgIC5jb2xsZWN0aW9uKCJ2ZWhpY2xlcyIpCiAgICAgICAgLmRvYyh0aGlzLmF1dGhVc2VyLmRyaXZlcklkKQogICAgICAgIC5nZXQoKQogICAgICAgIC50aGVuKChzbmFwc2hvdCkgPT4gewogICAgICAgICAgRXZlbnRTZXJ2aWNlLiRlbWl0KCJsb2FkaW5nIiwgImhpZGUiKTsKICAgICAgICAgIHRoaXMudmVoaWNsZURldGFpbCA9IHsgLi4uc25hcHNob3QuZGF0YSgpIH07CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiAoewogICAgICAgICAgZXJyb3JDb2RlOiBlcnJvci5jb2RlLAogICAgICAgICAgZXJyb3JNZXNzYWdlOiBlcnJvci5tZXNzYWdlLAogICAgICAgIH0pKQogICAgICAgIC5maW5hbGx5KCgpID0+IEV2ZW50U2VydmljZS4kZW1pdCgibG9hZGluZyIsICJoaWRlIikpOwogICAgfSwKICAgIHVwZGF0ZVByb2ZpbGVJbWFnZShpbWFnZSkgewogICAgICB0aGlzLmltYWdlVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChpbWFnZSk7CgogICAgICB0aGlzLmltYWdlRGlhbG9nID0gZmFsc2U7CiAgICAgIGlmICh0aGlzLmN1cnJlbnRUeXBlID09PSAiaXNQcm9maWxlIikgewogICAgICAgIHRoaXMudXBkYXRlRHJpdmVyc0ltYWdlKGltYWdlLCB0aGlzLmN1cnJlbnRWYWx1ZSwgdGhpcy5jdXJyZW50TmFtZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy51cGRhdGVWZWNoaWNsZURvY3MoaW1hZ2UsIHRoaXMuY3VycmVudFZhbHVlLCB0aGlzLmN1cnJlbnRQYXRoKTsKICAgICAgfQogICAgfSwKICAgIHVwZGF0ZURyaXZlcnNJbWFnZShpbWFnZSwgdmFsdWUsIG5hbWUpIHsKICAgICAgRXZlbnRTZXJ2aWNlLiRlbWl0KCJsb2FkaW5nIiwgInNob3ciKTsKICAgICAgZmlyZWJhc2UKICAgICAgICAuc3RvcmFnZSgpCiAgICAgICAgLnJlZigiL2RyaXZlcnMvIiArIHRoaXMuYXV0aFVzZXIuZHJpdmVySWQgKyAiLyIgKyBuYW1lKQogICAgICAgIC5wdXQoaW1hZ2UsIHsgY29udGVudFR5cGU6IGBpbWFnZS9qcGdgIH0pCiAgICAgICAgLnRoZW4oKHNuYXBzaG90KSA9PiB7CiAgICAgICAgICBzbmFwc2hvdC5yZWYuZ2V0RG93bmxvYWRVUkwoKS50aGVuKCh1cmwpID0+IHsKICAgICAgICAgICAgcmVmRHJpdmVycwogICAgICAgICAgICAgIC5kb2ModGhpcy5hdXRoVXNlci5kcml2ZXJJZCkKICAgICAgICAgICAgICAudXBkYXRlKHsgW3ZhbHVlXTogdXJsIH0pCiAgICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgICAgICBFdmVudFNlcnZpY2UuJGVtaXQoImxvYWRpbmciLCAiaGlkZSIpOwogICAgICAgICAgICAgICAgRXZlbnRTZXJ2aWNlLiRlbWl0KCJzdWNjZXNzTWVzc2FnZSIsICJTdWNjZXNzZnVsbHkgVXBkYXRlZCIpOwogICAgICAgICAgICAgICAgdGhpcy5kcml2ZXJzSW5mbygpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfSkKICAgICAgICAuZmluYWxseSgoKSA9PiB7CiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9KTsKICAgIH0sCiAgICBkcml2ZXJzSW5mbygpIHsKICAgICAgRXZlbnRTZXJ2aWNlLiRlbWl0KCJsb2FkaW5nIiwgInNob3ciKTsKICAgICAgZmlyZWJhc2UKICAgICAgICAuZmlyZXN0b3JlKCkKICAgICAgICAuY29sbGVjdGlvbigiZHJpdmVycyIpCiAgICAgICAgLmRvYyh0aGlzLmF1dGhVc2VyLmRyaXZlcklkKQogICAgICAgIC5nZXQoKQogICAgICAgIC50aGVuKChzbmFwc2hvdCkgPT4gewogICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiYXV0aFVzZXIiLCBKU09OLnN0cmluZ2lmeShzbmFwc2hvdC5kYXRhKCkpKTsKICAgICAgICAgICAgdGhpcy5hdXRoVXNlciA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImF1dGhVc2VyIikpOwogICAgICAgICAgfSk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiAoewogICAgICAgICAgZXJyb3JDb2RlOiBlcnJvci5jb2RlLAogICAgICAgICAgZXJyb3JNZXNzYWdlOiBlcnJvci5tZXNzYWdlLAogICAgICAgIH0pKQogICAgICAgIC5maW5hbGx5KCgpID0+IEV2ZW50U2VydmljZS4kZW1pdCgibG9hZGluZyIsICJoaWRlIikpOwogICAgfSwKICAgIHVwZGF0ZVZlY2hpY2xlRG9jcyhpbWFnZSwgdmFsdWUsIHBhdGgpIHsKICAgICAgaWYgKHRoaXMubG9hZGluZykgcmV0dXJuOwogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICBmaXJlYmFzZQogICAgICAgIC5zdG9yYWdlKCkKICAgICAgICAucmVmKHBhdGggKyB0aGlzLmF1dGhVc2VyLmRyaXZlcklkKQogICAgICAgIC5wdXQoaW1hZ2UsIHsgY29udGVudFR5cGU6IGBpbWFnZS9qcGdgIH0pCiAgICAgICAgLnRoZW4oKHNuYXBzaG90KSA9PiB7CiAgICAgICAgICBzbmFwc2hvdC5yZWYuZ2V0RG93bmxvYWRVUkwoKS50aGVuKCh1cmwpID0+IHsKICAgICAgICAgICAgcmVmVmVoaWNsZQogICAgICAgICAgICAgIC5kb2ModGhpcy5hdXRoVXNlci5kcml2ZXJJZCkKICAgICAgICAgICAgICAudXBkYXRlKHsgW3ZhbHVlXTogdXJsIH0pCiAgICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLnNldE5vdGlmeU1lc3NhZ2UoIlN1Y2Nlc3NmdWxseSBVcGxvYWQgZG9jcyIpOwogICAgICAgICAgICAgICAgdGhpcy5nZXRWZWNoaWNsZUluZm8oKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0pCiAgICAgICAgLmZpbmFsbHkoKCkgPT4gewogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfSk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["Documents.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Documents.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <h3>Documents</h3>\n    <el-row :gutter=\"20\">\n      <el-col :md=\"8\" v-for=\"(item, index) in documents\" :key=\"index\">\n        <el-card class=\"box-card\" shadow=\"always\">\n          <el-row :gutter=\"20\">\n            <el-col :md=\"12\">\n              <div class=\"o-card-title-3\">\n                {{ item.title }}\n              </div>\n            </el-col>\n            <el-col :md=\"12\">\n              <div class=\"o-card-title-3\">\n                <el-button\n                  icon=\"el-icon-edit\"\n                  class=\"float-right\"\n                  circle\n                  @click=\"openImageDialog(item, 'isProfile')\"\n                ></el-button>\n              </div>\n            </el-col>\n          </el-row>\n          <br />\n          <el-row :gutter=\"20\">\n            <el-col :span=\"24\">\n              <el-image\n                :src=\"authUser[item.value]\"\n                class=\"height-250\"\n                fit=\"fit\"\n              >\n                <div slot=\"placeholder\" class=\"image-slot\">\n                  Loading<span class=\"dot\">...</span>\n                </div>\n              </el-image>\n            </el-col>\n          </el-row>\n        </el-card>\n      </el-col>\n    </el-row>\n    <br />\n    <el-row :gutter=\"20\">\n      <el-col :md=\"8\" v-for=\"(item, index) in vehicleDocs\" :key=\"index\">\n        <el-card class=\"box-card\" shadow=\"always\">\n          <el-row :gutter=\"20\">\n            <el-col :md=\"12\">\n              <div class=\"o-card-title-3\">\n                {{ item.title }}\n              </div>\n            </el-col>\n            <el-col :md=\"12\">\n              <div class=\"o-card-title-3\">\n                <el-button\n                  icon=\"el-icon-edit\"\n                  @click=\"openImageDialog(item, 'isVehicle')\"\n                  class=\"float-right\"\n                  circle\n                ></el-button>\n              </div>\n            </el-col>\n          </el-row>\n          <br />\n          <el-row :gutter=\"20\">\n            <el-col :span=\"24\">\n              <el-image\n                :src=\"\n                  vehicleDetail[item.value]\n                    ? vehicleDetail[item.value]\n                    : vehicleDetail[item.nextValue]\n                \"\n                class=\"height-250\"\n                fit=\"fit\"\n              >\n                <div slot=\"placeholder\" class=\"image-slot\">\n                  Loading<span class=\"dot\">...</span>\n                </div>\n              </el-image>\n            </el-col>\n          </el-row>\n        </el-card>\n      </el-col>\n    </el-row>\n    <image-upload\n      v-if=\"imageDialog\"\n      v-model=\"imageName\"\n      :resize=\"false\"\n      :title=\"title\"\n      @close=\"imageDialog = false\"\n      @imageName=\"imageName = $event\"\n      @input=\"updateProfileImage\"\n    >\n    </image-upload>\n  </div>\n</template>\n<script>\nimport ImageUpload from \"./DocumentsComponents/ImageUpload\";\nimport { EventService } from \"../main.js\";\nimport firebase from \"../plugins/firebase\";\nimport \"firebase/storage\";\nconst db = firebase.firestore();\nconst refVehicle = db.collection(\"vehicles\");\nconst refDrivers = db.collection(\"drivers\");\nexport default {\n  components: { ImageUpload },\n\n  data() {\n    return {\n      title: \"\",\n      openProfileEditForm: false,\n      authUser: {},\n      vehicleDetail: {},\n      imageDialog: false,\n      imageUrl: \"\",\n      imageName: \"\",\n      currentFile: \"\",\n      currentIndex: 0,\n      formValues: {},\n      documents: [\n        {\n          title: \"Driver Photo\",\n          value: \"driverAvatarUrl\",\n          name: \"profilePhoto\",\n          src: \"https://cdn.vuetifyjs.com/images/cards/store.jpg\",\n        },\n        {\n          title: \"National Id\",\n          value: \"driverIDUrl\",\n          name: \"driver_id\",\n          src: \"https://cdn.vuetifyjs.com/images/cards/store.jpg\",\n        },\n        {\n          title: \"Driver License\",\n          value: \"driverLicenseUrl\",\n          name: \"driver_license\",\n          src: \"https://cdn.vuetifyjs.com/images/cards/store.jpg\",\n        },\n      ],\n      currentValue: [],\n      loading: false,\n      vehicleDocs: [\n        {\n          title: \"Vehicle Photo\",\n          value: \"vehicleAvatarUrl\",\n          path: \"vehicles/\",\n          src: \"https://cdn.vuetifyjs.com/images/cards/store.jpg\",\n        },\n        {\n          title: \"PSV Taxi License\",\n          value: \"vehicleLicenseUrl\",\n          nextValue: \"vehicleLicense\",\n          path: \"vehicleLicense/\",\n          src: \"https://cdn.vuetifyjs.com/images/cards/store.jpg\",\n        },\n        {\n          title: \"Proof of Insurance\",\n          value: \"proofOfInsuranceUrl\",\n          path: \"vehiclesdocs/\",\n          src: \"https://cdn.vuetifyjs.com/images/cards/store.jpg\",\n        },\n      ],\n      currentType: \"\",\n      items: [\n        {\n          text: \"Dashboard\",\n          disabled: false,\n          href: \"/dashboard\",\n        },\n        {\n          text: \"Documents\",\n          disabled: true,\n          href: \"breadcrumbs_link_1\",\n        },\n      ],\n      currentName: \"\",\n      currentPath: \"\",\n    };\n  },\n  created() {\n    this.authUser = JSON.parse(localStorage.getItem(\"authUser\"));\n    this.getVechicleInfo();\n  },\n  methods: {\n    openImageDialog(detail, type) {\n      this.title = detail.title;\n      this.imageDialog = true;\n      this.currentValue = detail.value;\n      this.currentType = type;\n      this.currentName = detail.name;\n      this.currentPath = detail.path;\n    },\n    getVechicleInfo() {\n      EventService.$emit(\"loading\", \"show\");\n      firebase\n        .firestore()\n        .collection(\"vehicles\")\n        .doc(this.authUser.driverId)\n        .get()\n        .then((snapshot) => {\n          EventService.$emit(\"loading\", \"hide\");\n          this.vehicleDetail = { ...snapshot.data() };\n        })\n        .catch((error) => ({\n          errorCode: error.code,\n          errorMessage: error.message,\n        }))\n        .finally(() => EventService.$emit(\"loading\", \"hide\"));\n    },\n    updateProfileImage(image) {\n      this.imageUrl = URL.createObjectURL(image);\n\n      this.imageDialog = false;\n      if (this.currentType === \"isProfile\") {\n        this.updateDriversImage(image, this.currentValue, this.currentName);\n      } else {\n        this.updateVechicleDocs(image, this.currentValue, this.currentPath);\n      }\n    },\n    updateDriversImage(image, value, name) {\n      EventService.$emit(\"loading\", \"show\");\n      firebase\n        .storage()\n        .ref(\"/drivers/\" + this.authUser.driverId + \"/\" + name)\n        .put(image, { contentType: `image/jpg` })\n        .then((snapshot) => {\n          snapshot.ref.getDownloadURL().then((url) => {\n            refDrivers\n              .doc(this.authUser.driverId)\n              .update({ [value]: url })\n              .then((response) => {\n                EventService.$emit(\"loading\", \"hide\");\n                EventService.$emit(\"successMessage\", \"Successfully Updated\");\n                this.driversInfo();\n              });\n          });\n        })\n        .finally(() => {\n          this.loading = false;\n        });\n    },\n    driversInfo() {\n      EventService.$emit(\"loading\", \"show\");\n      firebase\n        .firestore()\n        .collection(\"drivers\")\n        .doc(this.authUser.driverId)\n        .get()\n        .then((snapshot) => {\n          this.$nextTick(() => {\n            localStorage.setItem(\"authUser\", JSON.stringify(snapshot.data()));\n            this.authUser = JSON.parse(localStorage.getItem(\"authUser\"));\n          });\n        })\n        .catch((error) => ({\n          errorCode: error.code,\n          errorMessage: error.message,\n        }))\n        .finally(() => EventService.$emit(\"loading\", \"hide\"));\n    },\n    updateVechicleDocs(image, value, path) {\n      if (this.loading) return;\n      this.loading = true;\n      firebase\n        .storage()\n        .ref(path + this.authUser.driverId)\n        .put(image, { contentType: `image/jpg` })\n        .then((snapshot) => {\n          snapshot.ref.getDownloadURL().then((url) => {\n            refVehicle\n              .doc(this.authUser.driverId)\n              .update({ [value]: url })\n              .then((response) => {\n                this.setNotifyMessage(\"Successfully Upload docs\");\n                this.getVechicleInfo();\n              });\n          });\n        })\n        .finally(() => {\n          this.loading = false;\n        });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.float-right {\n  float: right;\n}\n.height-250 {\n  height: 250px;\n}\n</style>\n"]}]}